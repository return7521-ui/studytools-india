<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>StudyTools India | Professional Academic Toolkit</title>
    
    <meta name="description" content="The most advanced academic toolkit for ISC, JEE, and NDA students. Over 100+ precision calculators for Physics, Math, and Chemistry.">
    <meta name="keywords" content="StudyTools India, JEE calculator, ISC marks calculator, Scientific calculator, Shashank Kushwaha, NDA math tools">
    <meta name="author" content="Shashank Kushwaha">
    <meta name="theme-color" content="#6366f1">
    <link rel="canonical" href="https://return7521-ui.github.io/studytools-india/">

    <link rel="manifest" href="data:application/manifest+json,{'name':'StudyTools India','short_name':'StudyTools','start_url':'.','display':'standalone','background_color':'#0f172a','theme_color':'#6366f1'}">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Orbitron:wght@800&family=Roboto+Mono:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        :root {
            /* Immersive Color Palette */
            --primary: #6366f1;
            --primary-glow: rgba(99, 102, 241, 0.4);
            --bg-dark: #0f172a;
            --bg-light: #f8fafc;
            --card-glass: rgba(255, 255, 255, 0.8);
            --card-glass-dark: rgba(30, 41, 59, 0.9);
            --text-main: #1e293b;
            --text-dim: #64748b;
            --border-glass: rgba(255, 255, 255, 0.2);
            --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* Reset & Mobile-First Foundation */
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: var(--bg-light);
            color: var(--text-main);
            overflow-x: hidden;
            transition: var(--transition);
            line-height: 1.6;
        }

        body.dark-mode {
            background: var(--bg-dark);
            color: #f1f5f9;
        }

        /* Immersive Particle-Like Background */
        .aura-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at 10% 20%, rgba(99, 102, 241, 0.1) 0%, transparent 40%),
                        radial-gradient(circle at 90% 80%, rgba(139, 92, 246, 0.1) 0%, transparent 40%);
            z-index: -1; pointer-events: none;
        }

        .container { width: 92%; max-width: 1300px; margin: 0 auto; position: relative; }

        /* Smooth Scroll Management */
        html { scroll-behavior: smooth; }

        /* Scrollbar Redesign */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-light); }
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 10px; }
        body.dark-mode ::-webkit-scrollbar-track { background: var(--bg-dark); }
    </style>
</head>
<body id="app-body">
    <div class="aura-bg"></div>

    <script>
        // === PWA APP INSTALLATION LOGIC ===
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            // Automatically show install prompt for professional feel
            setTimeout(() => {
                if (deferredPrompt) deferredPrompt.prompt();
            }, 3000);
        });

        // Toggle Theme Logic
        function toggleGlobalTheme() {
            document.getElementById('app-body').classList.toggle('dark-mode');
            const icon = document.querySelector('.theme-toggle i');
            icon.classList.toggle('fa-moon');
            icon.classList.toggle('fa-sun');
            localStorage.setItem('studytools_theme', document.getElementById('app-body').classList.contains('dark-mode') ? 'dark' : 'light');
        }

        window.onload = () => {
            if(localStorage.getItem('studytools_theme') === 'dark') {
                document.getElementById('app-body').classList.add('dark-mode');
            }
        };
    </script>
</body>
</html>
<header class="main-header">
    <div class="container header-content">
        <div class="logo-area">
            <div class="logo-icon">
                <i class="fas fa-microchip"></i>
            </div>
            <div class="logo-text">
                STUDYTOOLS <span class="accent">INDIA</span>
            </div>
        </div>

        <div class="header-actions">
            <button class="action-btn" id="install-btn" title="Install App">
                <i class="fas fa-download"></i>
            </button>
            <button class="action-btn theme-toggle" onclick="toggleGlobalTheme()">
                <i class="fas fa-moon"></i>
            </button>
        </div>
    </div>
</header>

<section class="nav-dock">
    <div class="container">
        <div class="search-wrapper">
            <i class="fas fa-search search-icon"></i>
            <input type="text" id="master-search" placeholder="Search 100+ precision tools..." onkeyup="universalSearch()">
            <div class="search-status" id="search-count">Ready for calculations</div>
        </div>

        <div class="category-strip">
            <button class="cat-pill active" onclick="filterByCategory('all', this)">All Tools</button>
            <button class="cat-pill" onclick="filterByCategory('academic', this)">Academic</button>
            <button class="cat-pill" onclick="filterByCategory('math', this)">Mathematics</button>
            <button class="cat-pill" onclick="filterByCategory('physics', this)">Physics</button>
            <button class="cat-pill" onclick="filterByCategory('chemistry', this)">Chemistry</button>
            <button class="cat-pill" onclick="filterByCategory('finance', this)">Finance</button>
            <button class="cat-pill" onclick="filterByCategory('utility', this)">Utility</button>
        </div>
    </div>
</section>

<style>
    /* --- HEADER STYLING --- */
    .main-header {
        position: sticky; top: 0; z-index: 1000;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(20px);
        border-bottom: 1px solid var(--border-glass);
        padding: 15px 0;
    }

    .header-content { display: flex; justify-content: space-between; align-items: center; }

    .logo-area { display: flex; align-items: center; gap: 12px; }
    .logo-icon {
        width: 40px; height: 40px; background: var(--primary);
        color: white; border-radius: 10px; display: flex;
        align-items: center; justify-content: center; font-size: 1.2rem;
        box-shadow: 0 8px 16px var(--primary-glow);
    }

    .logo-text {
        font-family: 'Orbitron', sans-serif; font-weight: 800; font-size: 1.1rem;
        letter-spacing: 1px; color: var(--text-main);
    }
    body.dark-mode .logo-text { color: white; }
    .logo-text .accent { color: var(--primary); }

    .action-btn {
        width: 40px; height: 40px; border-radius: 10px; border: 1px solid var(--border-glass);
        background: white; cursor: pointer; color: var(--text-main); transition: var(--transition);
    }
    body.dark-mode .action-btn { background: #1e293b; color: white; }
    .action-btn:hover { transform: translateY(-2px); border-color: var(--primary); }

    /* --- NAV DOCK & SEARCH --- */
    .nav-dock { padding: 30px 0 10px; }

    .search-wrapper {
        position: relative; margin-bottom: 25px;
        background: var(--card-glass); border-radius: 18px;
        border: 1px solid var(--border-glass); padding: 5px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.05);
    }
    body.dark-mode .search-wrapper { background: var(--card-glass-dark); }

    .search-icon { position: absolute; left: 20px; top: 50%; transform: translateY(-50%); color: var(--primary); }
    
    #master-search {
        width: 100%; padding: 15px 15px 15px 50px; border: none; background: transparent;
        font-size: 1rem; font-family: inherit; color: inherit;
    }

    .search-status {
        position: absolute; right: 20px; top: 50%; transform: translateY(-50%);
        font-size: 0.7rem; font-weight: 700; color: var(--text-dim);
        text-transform: uppercase; letter-spacing: 0.5px;
    }

    /* --- CATEGORY STRIP --- */
    .category-strip {
        display: flex; gap: 10px; overflow-x: auto;
        padding-bottom: 10px; scrollbar-width: none;
    }
    .category-strip::-webkit-scrollbar { display: none; }

    .cat-pill {
        white-space: nowrap; padding: 10px 20px; border-radius: 12px;
        border: 1px solid var(--border-glass); background: white;
        font-size: 0.85rem; font-weight: 600; cursor: pointer;
        transition: var(--transition); color: var(--text-dim);
    }
    body.dark-mode .cat-pill { background: #1e293b; color: #94a3b8; }

    .cat-pill:hover, .cat-pill.active {
        background: var(--primary); color: white; border-color: var(--primary);
        box-shadow: 0 8px 15px var(--primary-glow);
    }
</style>

<script>
    // Filtering Logic
    function filterByCategory(category, element) {
        // Update Active Pill
        document.querySelectorAll('.cat-pill').forEach(p => p.classList.remove('active'));
        element.classList.add('active');

        const cards = document.querySelectorAll('.tool-card');
        let count = 0;

        cards.forEach(card => {
            if (category === 'all' || card.getAttribute('data-category') === category) {
                card.style.display = "flex";
                count++;
            } else {
                card.style.display = "none";
            }
        });
        document.getElementById('search-count').innerText = `${count} Tools Found`;
    }

    // Universal Search Logic
    function universalSearch() {
        const query = document.getElementById('master-search').value.toLowerCase();
        const cards = document.querySelectorAll('.tool-card');
        let visible = 0;

        cards.forEach(card => {
            const title = card.querySelector('h3').innerText.toLowerCase();
            const tags = card.getAttribute('data-tags').toLowerCase();
            if (title.includes(query) || tags.includes(query)) {
                card.style.display = "flex";
                visible++;
            } else {
                card.style.display = "none";
            }
        });
        document.getElementById('search-count').innerText = `${visible} Results`;
    }
</script>
<div class="calc-dock" id="scientific-dock">
    <div class="calc-handle" onclick="toggleCalc()">
        <div class="handle-bar"></div>
        <span><i class="fas fa-calculator"></i> Scientific Engine</span>
    </div>
    
    <div class="calc-container">
        <div class="calc-screen">
            <div class="calc-history" id="calc-history"></div>
            <div class="calc-main-display" id="calc-display">0</div>
        </div>

        <div class="calc-keypad">
            <button class="key sc-key" onclick="appendCalc('Math.sin(')">sin</button>
            <button class="key sc-key" onclick="appendCalc('Math.cos(')">cos</button>
            <button class="key sc-key" onclick="appendCalc('Math.tan(')">tan</button>
            <button class="key sc-key" onclick="appendCalc('Math.log10(')">log</button>
            
            <button class="key sc-key" onclick="appendCalc('**')">xʸ</button>
            <button class="key sc-key" onclick="appendCalc('Math.sqrt(')">√</button>
            <button class="key sc-key" onclick="appendCalc('Math.PI')">π</button>
            <button class="key sc-key" onclick="appendCalc('Math.E')">e</button>

            <button class="key num-key" onclick="appendCalc('7')">7</button>
            <button class="key num-key" onclick="appendCalc('8')">8</button>
            <button class="key num-key" onclick="appendCalc('9')">9</button>
            <button class="key op-key" onclick="appendCalc('/')">÷</button>

            <button class="key num-key" onclick="appendCalc('4')">4</button>
            <button class="key num-key" onclick="appendCalc('5')">5</button>
            <button class="key num-key" onclick="appendCalc('6')">6</button>
            <button class="key op-key" onclick="appendCalc('*')">×</button>

            <button class="key num-key" onclick="appendCalc('1')">1</button>
            <button class="key num-key" onclick="appendCalc('2')">2</button>
            <button class="key num-key" onclick="appendCalc('3')">3</button>
            <button class="key op-key" onclick="appendCalc('-')">−</button>

            <button class="key clear-key" onclick="clearCalc()">AC</button>
            <button class="key num-key" onclick="appendCalc('0')">0</button>
            <button class="key op-key" onclick="calculateResult()">=</button>
            <button class="key op-key" onclick="appendCalc('+')">+</button>
        </div>
    </div>
</div>

<style>
    /* --- CALCULATOR DOCK STYLING --- */
    .calc-dock {
        position: fixed; bottom: -420px; left: 0; width: 100%;
        background: var(--card-glass); backdrop-filter: blur(30px);
        border-top: 1px solid var(--border-glass); z-index: 2000;
        transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        border-radius: 30px 30px 0 0; box-shadow: 0 -10px 40px rgba(0,0,0,0.2);
    }
    body.dark-mode .calc-dock { background: var(--card-glass-dark); }
    .calc-dock.active { transform: translateY(-420px); }

    .calc-handle {
        padding: 15px; text-align: center; cursor: pointer;
        font-family: 'Orbitron', sans-serif; font-size: 0.75rem;
        font-weight: 700; color: var(--primary);
    }
    .handle-bar {
        width: 40px; height: 4px; background: var(--text-dim);
        border-radius: 10px; margin: 0 auto 8px; opacity: 0.3;
    }

    .calc-container { padding: 0 20px 20px; max-width: 500px; margin: 0 auto; }

    .calc-screen {
        background: rgba(0,0,0,0.05); border-radius: 15px;
        padding: 20px; margin-bottom: 20px; text-align: right;
        border: 1px solid var(--border-glass);
    }
    body.dark-mode .calc-screen { background: rgba(255,255,255,0.03); }

    .calc-history { font-family: 'Roboto Mono', monospace; font-size: 0.8rem; color: var(--text-dim); min-height: 1.2rem; }
    .calc-main-display { font-family: 'Roboto Mono', monospace; font-size: 1.8rem; font-weight: 700; margin-top: 5px; overflow-x: auto; }

    .calc-keypad {
        display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;
    }

    .key {
        padding: 15px; border-radius: 12px; border: 1px solid var(--border-glass);
        font-family: 'Poppins', sans-serif; font-weight: 600; font-size: 1rem;
        cursor: pointer; transition: 0.2s;
    }
    .num-key { background: white; color: var(--text-main); }
    .op-key { background: var(--primary); color: white; }
    .sc-key { background: rgba(99, 102, 241, 0.1); color: var(--primary); font-size: 0.8rem; }
    .clear-key { background: #ef4444; color: white; }

    body.dark-mode .num-key { background: #1e293b; color: white; }

    .key:active { transform: scale(0.9); }
</style>

<script>
    let calcExpression = "";

    function toggleCalc() {
        document.getElementById('scientific-dock').classList.toggle('active');
    }

    function appendCalc(val) {
        calcExpression += val;
        document.getElementById('calc-display').innerText = calcExpression;
    }

    function clearCalc() {
        calcExpression = "";
        document.getElementById('calc-display').innerText = "0";
        document.getElementById('calc-history').innerText = "";
    }

    function calculateResult() {
        try {
            const result = eval(calcExpression.replace('×', '*').replace('÷', '/'));
            document.getElementById('calc-history').innerText = calcExpression + " =";
            document.getElementById('calc-display').innerText = Number.isInteger(result) ? result : result.toFixed(4);
            calcExpression = result.toString();
        } catch (e) {
            document.getElementById('calc-display').innerText = "Error";
            calcExpression = "";
        }
    }
</script>
<script>
    /**
     * GLOBAL EXPORT CONTROLLER
     * Powers PNG, JPG, and PDF downloads for all 100+ tools.
     * Built specifically for @studytoolsindia
     */
    async function universalExport(toolId, format) {
        const toolCard = document.querySelector(`[data-tool-id="${toolId}"]`);
        const resultDisplay = toolCard.querySelector('.res-display, .result-display');

        // Validation: Ensure there is a result to export
        if (!resultDisplay || !resultDisplay.classList.contains('show')) {
            alert("Mind-Blowing Tip: Please calculate a result first before downloading!");
            return;
        }

        // Add "Processing" State to Button
        const btn = event.currentTarget;
        const originalText = btn.innerHTML;
        btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
        btn.disabled = true;

        try {
            if (format === 'png' || format === 'jpg') {
                // Configure Screenshot - Temporarily hide export buttons for a clean look
                const exportBar = toolCard.querySelector('.card-export-bar');
                if(exportBar) exportBar.style.opacity = '0';

                const canvas = await html2canvas(toolCard, {
                    backgroundColor: null,
                    scale: 3, // Ultra-High Definition
                    borderRadius: 24,
                    useCORS: true
                });

                if(exportBar) exportBar.style.opacity = '1';

                const link = document.createElement('a');
                link.download = `StudyTools_India_${toolId}_${Date.now()}.${format}`;
                link.href = canvas.toDataURL(`image/${format === 'jpg' ? 'jpeg' : 'png'}`);
                link.click();
            } 
            
            else if (format === 'pdf') {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                // Professional PDF Branding
                doc.setFillColor(99, 102, 241); // Primary Color
                doc.rect(0, 0, 210, 40, 'F');
                
                doc.setTextColor(255, 255, 255);
                doc.setFont("helvetica", "bold");
                doc.setFontSize(22);
                doc.text("STUDYTOOLS INDIA", 15, 25);
                
                doc.setFontSize(10);
                doc.text("Professional Academic Result Report", 15, 32);
                
                // Result Content
                doc.setTextColor(30, 41, 59);
                doc.setFontSize(14);
                doc.text(`Tool Category: ${toolCard.getAttribute('data-category').toUpperCase()}`, 15, 60);
                
                doc.setFontSize(18);
                doc.text(`Result: ${resultDisplay.innerText}`, 15, 75);
                
                doc.setDrawColor(226, 232, 240);
                doc.line(15, 85, 195, 85);
                
                doc.setFontSize(10);
                doc.setTextColor(100, 116, 139);
                doc.text(`Generated on: ${new Date().toLocaleString()}`, 15, 95);
                doc.text(`Calculated via StudyTools India Platform`, 15, 102);
                
                doc.save(`StudyTools_Report_${toolId}.pdf`);
            }
        } catch (error) {
            console.error("Export Error:", error);
            alert("Something went wrong! Please check your internet connection.");
        } finally {
            btn.innerHTML = originalText;
            btn.disabled = false;
        }
    }

    /**
    <section class="tool-section container" id="academic-tools">
    <div class="tools-grid">
        
        <div class="tool-card" data-category="academic" data-tool-id="percentage-pro" data-tags="marks percentage exam academic pcm jee">
            <div class="tool-header">
                <div class="tool-icon" style="background:rgba(99, 102, 241, 0.1); color:var(--primary)">
                    <i class="fas fa-percent"></i>
                </div>
                <div class="tool-meta">
                    <h3>Percentage Master</h3>
                    <p>Calculate scores and percentage change.</p>
                </div>
            </div>

            <div class="tool-body">
                <div class="input-stack">
                    <div class="input-group">
                        <label>Marks Obtained</label>
                        <input type="number" id="perc-obt" placeholder="e.g. 480">
                    </div>
                    <div class="input-group" style="margin-top:15px;">
                        <label>Total Marks</label>
                        <input type="number" id="perc-tot" placeholder="e.g. 500">
                    </div>
                </div>
                
                <button class="primary-calc-btn academic-btn" onclick="runPercentagePro()">
                    <i class="fas fa-bolt"></i> Calculate Result
                </button>

                <div class="res-display" id="res-perc">
                    <span class="placeholder">Enter marks to see result...</span>
                </div>
            </div>

            <div class="card-export-bar">
                <button class="export-btn" onclick="universalExport('percentage-pro', 'png')"><i class="fas fa-image"></i> PNG</button>
                <button class="export-btn" onclick="universalExport('percentage-pro', 'pdf')"><i class="fas fa-file-pdf"></i> PDF</button>
            </div>
        </div>

        <div class="tool-card" data-category="academic" data-tool-id="attendance-pro" data-tags="school attendance tracker criteria skip class pcm">
            <div class="tool-header">
                <div class="tool-icon" style="background:rgba(16, 185, 129, 0.1); color:#10b981">
                    <i class="fas fa-calendar-check"></i>
                </div>
                <div class="tool-meta">
                    <h3>Attendance Strategist</h3>
                    <p>Plan your 75% goal precisely.</p>
                </div>
            </div>

            <div class="tool-body">
                <div class="input-stack">
                    <div class="input-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div class="input-group"><label>Present</label><input type="number" id="att-pres" placeholder="40"></div>
                        <div class="input-group"><label>Total Classes</label><input type="number" id="att-tot" placeholder="50"></div>
                    </div>
                    <div class="input-group" style="margin-top:15px;">
                        <label>Goal % (Required)</label>
                        <input type="number" id="att-goal" value="75">
                    </div>
                </div>
                
                <button class="primary-calc-btn" style="background:#10b981" onclick="runAttendancePro()">
                    <i class="fas fa-chess-knight"></i> Analyze Strategy
                </button>

                <div class="res-display" id="res-att">
                    <span class="placeholder">Current: 0%</span>
                </div>
            </div>

            <div class="card-export-bar">
                <button class="export-btn" onclick="universalExport('attendance-pro', 'png')"><i class="fas fa-image"></i> PNG</button>
                <button class="export-btn" onclick="universalExport('attendance-pro', 'pdf')"><i class="fas fa-file-pdf"></i> PDF</button>
            </div>
        </div>

    </div>
</section>

<style>
    /* Grid Layout for Professional Spacing */
    .tools-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: 25px;
        padding: 20px 0;
    }

    .tool-card {
        background: var(--card-glass);
        backdrop-filter: blur(20px);
        border: 1px solid var(--border-glass);
        border-radius: 24px;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        transition: var(--transition);
    }
    body.dark-mode .tool-card { background: var(--card-glass-dark); }
    .tool-card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(0,0,0,0.1); }

    .tool-header { padding: 25px; display: flex; gap: 15px; border-bottom: 1px solid var(--border-glass); }
    .tool-icon { width: 50px; height: 50px; border-radius: 15px; display: flex; align-items: center; justify-content: center; font-size: 1.3rem; }
    .tool-meta h3 { font-size: 1.1rem; font-weight: 700; margin-bottom: 4px; }
    .tool-meta p { font-size: 0.8rem; color: var(--text-dim); }

    .tool-body { padding: 25px; }
    .input-group label { display: block; font-size: 0.75rem; font-weight: 700; color: var(--text-dim); margin-bottom: 8px; text-transform: uppercase; }
    .input-group input { width: 100%; padding: 12px; border-radius: 12px; border: 1px solid var(--border-glass); background: rgba(0,0,0,0.02); color: inherit; font-family: 'Roboto Mono', monospace; }
    body.dark-mode .input-group input { background: rgba(255,255,255,0.05); }

    .primary-calc-btn { width: 100%; margin-top: 20px; padding: 14px; border: none; border-radius: 12px; background: var(--primary); color: white; font-weight: 700; cursor: pointer; transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px; }
    .primary-calc-btn:hover { transform: scale(1.02); filter: brightness(1.1); }

    .res-display { margin-top: 20px; padding: 15px; border-radius: 12px; background: rgba(99, 102, 241, 0.05); border-left: 4px solid var(--primary); display: none; }
    .res-display.show { display: block; animation: slideInUp 0.4s ease; }
    @keyframes slideInUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
</style>

<script>
    // --- PERCENTAGE LOGIC ---
    function runPercentagePro() {
        const obt = parseFloat(document.getElementById('perc-obt').value);
        const tot = parseFloat(document.getElementById('perc-tot').value);
        const res = document.getElementById('res-perc');

        if (isNaN(obt) || isNaN(tot) || tot === 0) return;

        const perc = ((obt / tot) * 100).toFixed(2);
        res.innerHTML = `Final Score: <b style="font-size:1.2rem; color:var(--primary)">${perc}%</b>`;
        res.classList.add('show');
    }

    // --- ATTENDANCE STRATEGIST LOGIC ---
    function runAttendancePro() {
        const pres = parseInt(document.getElementById('att-pres').value);
        const tot = parseInt(document.getElementById('att-tot').value);
        const goal = parseInt(document.getElementById('att-goal').value);
        const res = document.getElementById('res-att');

        if (isNaN(pres) || isNaN(tot) || isNaN(goal)) return;

        let current = (pres / tot) * 100;
        let html = `Current Attendance: <b>${current.toFixed(1)}%</b><br>`;

        if (current < goal) {
            let req = Math.ceil((goal * tot - 100 * pres) / (100 - goal));
            html += `Status: <span style="color:#ef4444">Need <b>${req}</b> more classes.</span>`;
        } else {
            let skippable = Math.floor((100 * pres - goal * tot) / goal);
            html += `Status: <span style="color:#10b981">You can skip <b>${skippable}</b> classes.</span>`;
        }
        
        res.innerHTML = html;
        res.classList.add('show');
    }
</script>
<div class="tool-card" data-category="math" data-tool-id="quad-pro" data-tags="math algebra quadratic equation roots pcm jee">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(245, 158, 11, 0.1); color:#f59e0b">
            <i class="fas fa-square-root-variable"></i>
        </div>
        <div class="tool-meta">
            <h3>Quadratic Architect</h3>
            <p>Solve ax² + bx + c = 0 with Nature of Roots.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-row" style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px;">
                <div class="input-group"><label>a (x²)</label><input type="number" id="quad-a" placeholder="1"></div>
                <div class="input-group"><label>b (x)</label><input type="number" id="quad-b" placeholder="-5"></div>
                <div class="input-group"><label>c (const)</label><input type="number" id="quad-c" placeholder="6"></div>
            </div>
        </div>
        
        <button class="primary-calc-btn" style="background:#f59e0b" onclick="runQuadraticPro()">
            <i class="fas fa-function"></i> Find Roots
        </button>

        <div class="res-display" id="res-quad">
            <span class="placeholder">Awaiting coefficients...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('quad-pro', 'png')"><i class="fas fa-image"></i> PNG</button>
        <button class="export-btn" onclick="universalExport('quad-pro', 'pdf')"><i class="fas fa-file-pdf"></i> PDF</button>
    </div>
</div>

<div class="tool-card" data-category="math" data-tool-id="matrix-pro" data-tags="math matrix linear algebra determinant jee pcm">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(139, 92, 246, 0.1); color:#8b5cf6">
            <i class="fas fa-table-cells"></i>
        </div>
        <div class="tool-meta">
            <h3>Matrix Det Pro</h3>
            <p>3x3 Determinant Solver (Rule of Sarrus).</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="matrix-input-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px;">
            <input type="number" id="m11" placeholder="r1c1" class="m-input">
            <input type="number" id="m12" placeholder="r1c2" class="m-input">
            <input type="number" id="m13" placeholder="r1c3" class="m-input">
            <input type="number" id="m21" placeholder="r2c1" class="m-input">
            <input type="number" id="m22" placeholder="r2c2" class="m-input">
            <input type="number" id="m23" placeholder="r2c3" class="m-input">
            <input type="number" id="m31" placeholder="r3c1" class="m-input">
            <input type="number" id="m32" placeholder="r3c2" class="m-input">
            <input type="number" id="m33" placeholder="r3c3" class="m-input">
        </div>
        
        <button class="primary-calc-btn" style="background:#8b5cf6" onclick="runMatrixPro()">
            <i class="fas fa-th"></i> Calculate |A|
        </button>

        <div class="res-display" id="res-matrix">
            <span class="placeholder">Enter matrix values...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('matrix-pro', 'png')"><i class="fas fa-image"></i> Save Result</button>
    </div>
</div>

<style>
    .m-input {
        width: 100%; padding: 10px; border-radius: 8px; border: 1px solid var(--border-glass);
        background: rgba(0,0,0,0.02); text-align: center; font-family: 'Roboto Mono', monospace; font-size: 0.8rem;
    }
    body.dark-mode .m-input { background: rgba(255,255,255,0.05); }
</style>

<script>
    // --- QUADRATIC LOGIC ---
    function runQuadraticPro() {
        const a = parseFloat(document.getElementById('quad-a').value);
        const b = parseFloat(document.getElementById('quad-b').value);
        const c = parseFloat(document.getElementById('quad-c').value);
        const res = document.getElementById('res-quad');

        if (isNaN(a) || a === 0) {
            res.innerHTML = "Error: 'a' cannot be zero.";
            res.classList.add('show');
            return;
        }

        const D = (b * b) - (4 * a * c);
        let status = D > 0 ? "Real & Distinct" : D === 0 ? "Real & Equal" : "Imaginary";
        let out = `D: <b>${D}</b> (${status})<br>`;

        if (D >= 0) {
            const x1 = ((-b + Math.sqrt(D)) / (2 * a)).toFixed(2);
            const x2 = ((-b - Math.sqrt(D)) / (2 * a)).toFixed(2);
            out += `Roots: <b style="color:var(--primary)">x₁=${x1}, x₂=${x2}</b>`;
        } else {
            const real = (-b / (2 * a)).toFixed(2);
            const img = (Math.sqrt(-D) / (2 * a)).toFixed(2);
            out += `Roots: <b style="color:#ef4444">${real} ± ${img}i</b>`;
        }
        res.innerHTML = out;
        res.classList.add('show');
    }

    // --- MATRIX LOGIC ---
    function runMatrixPro() {
        const v = (id) => parseFloat(document.getElementById(id).value) || 0;
        const res = document.getElementById('res-matrix');

        const det = (
            v('m11') * (v('m22') * v('m33') - v('m23') * v('m32')) -
            v('m12') * (v('m21') * v('m33') - v('m23') * v('m31')) +
            v('m13') * (v('m21') * v('m32') - v('m22') * v('m31'))
        );

        res.innerHTML = `Determinant Value: <b style="color:#8b5cf6; font-size:1.1rem">|A| = ${det}</b>`;
        res.classList.add('show');
    }
</script>
<div class="tool-card" data-category="physics" data-tool-id="suvat-pro" data-tags="physics mechanics suvat motion kinematics pcm jee nda">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(59, 130, 246, 0.1); color:#3b82f6">
            <i class="fas fa-car-side"></i>
        </div>
        <div class="tool-meta">
            <h3>SUVAT Architect</h3>
            <p>Solve s, u, v, a, t for linear motion.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
            <div class="input-group"><label>Initial Vel (u)</label><input type="number" id="sv-u" placeholder="m/s"></div>
            <div class="input-group"><label>Final Vel (v)</label><input type="number" id="sv-v" placeholder="m/s"></div>
            <div class="input-group"><label>Accel (a)</label><input type="number" id="sv-a" placeholder="m/s²"></div>
            <div class="input-group"><label>Time (t)</label><input type="number" id="sv-t" placeholder="sec"></div>
            <div class="input-group" style="grid-column: span 2;"><label>Displacement (s)</label><input type="number" id="sv-s" placeholder="meters"></div>
        </div>
        
        <button class="primary-calc-btn" style="background:#3b82f6" onclick="runSuvatPro()">
            <i class="fas fa-rocket"></i> Solve Motion
        </button>

        <div class="res-display" id="res-suvat">
            <span class="placeholder">Enter 3 values to solve...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('suvat-pro', 'png')"><i class="fas fa-image"></i> PNG</button>
        <button class="export-btn" onclick="universalExport('suvat-pro', 'pdf')"><i class="fas fa-file-pdf"></i> PDF</button>
    </div>
</div>

<div class="tool-card" data-category="physics" data-tool-id="proj-pro" data-tags="physics mechanics projectile motion pcm jee nda">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(239, 68, 68, 0.1); color:#ef4444">
            <i class="fas fa-meteor"></i>
        </div>
        <div class="tool-meta">
            <h3>Projectile Predictor</h3>
            <p>Solve Range, Height & Time of Flight.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <div class="input-field">
                    <label>Velocity (u) m/s</label>
                    <input type="number" id="pj-u" placeholder="e.g. 30">
                </div>
                <div class="input-field">
                    <label>Angle (θ) Deg</label>
                    <input type="number" id="pj-ang" placeholder="e.g. 45">
                </div>
            </div>
        </div>
        
        <button class="primary-calc-btn" style="background:#ef4444" onclick="runProjectilePro()">
            <i class="fas fa-chart-line"></i> Predict Trajectory
        </button>

        <div class="res-display" id="res-proj">
            <span class="placeholder">Awaiting launch data...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('proj-pro', 'png')"><i class="fas fa-image"></i> PNG</button>
    </div>
</div>

<script>
    // --- SUVAT LOGIC ---
    function runSuvatPro() {
        let u = parseFloat(document.getElementById('sv-u').value);
        let v = parseFloat(document.getElementById('sv-v').value);
        let a = parseFloat(document.getElementById('sv-a').value);
        let t = parseFloat(document.getElementById('sv-t').value);
        let s = parseFloat(document.getElementById('sv-s').value);
        const res = document.getElementById('res-suvat');

        const inputs = [u, v, a, t, s].filter(x => !isNaN(x));
        if (inputs.length < 3) {
            res.innerHTML = "Need at least 3 values to solve.";
            res.classList.add('show');
            return;
        }

        // Calculation logic for various combinations
        if (isNaN(v)) {
            if (!isNaN(u) && !isNaN(a) && !isNaN(t)) v = u + (a * t);
            else if (!isNaN(u) && !isNaN(a) && !isNaN(s)) v = Math.sqrt(u*u + 2*a*s);
        }
        if (isNaN(s)) {
            if (!isNaN(u) && !isNaN(v) && !isNaN(t)) s = 0.5 * (u + v) * t;
            else if (!isNaN(u) && !isNaN(t) && !isNaN(a)) s = (u * t) + (0.5 * a * t * t);
        }

        res.innerHTML = `Final Velocity (v): <b>${v.toFixed(2)} m/s</b><br>Displacement (s): <b>${s.toFixed(2)} m</b>`;
        res.classList.add('show');
    }

    // --- PROJECTILE LOGIC ---
    function runProjectilePro() {
        const u = parseFloat(document.getElementById('pj-u').value);
        const ang = parseFloat(document.getElementById('pj-ang').value);
        const res = document.getElementById('res-proj');
        const g = 9.81;

        if (isNaN(u) || isNaN(ang)) return;

        const rad = ang * (Math.PI / 180);
        const R = (u * u * Math.sin(2 * rad)) / g;
        const H = (u * u * Math.pow(Math.sin(rad), 2)) / (2 * g);
        const T = (2 * u * Math.sin(rad)) / g;

        res.innerHTML = `Range: <b>${R.toFixed(2)}m</b> | Max H: <b>${H.toFixed(2)}m</b><br>Time of Flight: <b>${T.toFixed(2)}s</b>`;
        res.classList.add('show');
    }
</script>
<div class="tool-card" data-category="chemistry" data-tool-id="molar-pro" data-tags="chemistry mole concept molarity concentration pcm jee neet">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(16, 185, 129, 0.1); color:#10b981">
            <i class="fas fa-flask"></i>
        </div>
        <div class="tool-meta">
            <h3>Molarity Pro</h3>
            <p>Solve Molarity (M) for any solution.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-field">
                <label>Mass of Solute (grams)</label>
                <input type="number" id="mol-mass" placeholder="e.g. 5.85 for NaCl">
            </div>
            <div class="input-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 10px;">
                <div class="input-group"><label>Molar Mass</label><input type="number" id="mol-mm" placeholder="58.5"></div>
                <div class="input-group"><label>Volume (mL)</label><input type="number" id="mol-vol" placeholder="500"></div>
            </div>
        </div>
        
        <button class="primary-calc-btn" style="background:#10b981" onclick="runMolarityPro()">
            <i class="fas fa-vial"></i> Calculate Molarity
        </button>

        <div class="res-display" id="res-molar">
            <span class="placeholder">Awaiting solution data...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('molar-pro', 'png')"><i class="fas fa-image"></i> PNG</button>
        <button class="export-btn" onclick="universalExport('molar-pro', 'pdf')"><i class="fas fa-file-pdf"></i> PDF</button>
    </div>
</div>

<div class="tool-card" data-category="chemistry" data-tool-id="mole-pro" data-tags="chemistry moles particles avogadro pcm jee">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(139, 92, 246, 0.1); color:#8b5cf6">
            <i class="fas fa-atom"></i>
        </div>
        <div class="tool-meta">
            <h3>Mole-Particle Bridge</h3>
            <p>Sync Mass, Moles, and Particle count.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-field">
                <label>Molar Mass (g/mol)</label>
                <input type="number" id="mp-mm" placeholder="e.g. 18 for Water">
            </div>
            <div class="input-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px;">
                <div class="input-field">
                    <label>Given Mass (g)</label>
                    <input type="number" id="mp-mass" placeholder="Mass" oninput="syncMoles('mass')">
                </div>
                <div class="input-field">
                    <label>Moles (n)</label>
                    <input type="number" id="mp-n" placeholder="n" oninput="syncMoles('mole')">
                </div>
            </div>
        </div>
        
        <div class="res-display show res-success" id="res-mole-sync" style="font-size: 0.8rem;">
            Enter values to sync particles...
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('mole-pro', 'png')"><i class="fas fa-image"></i> Save Result</button>
    </div>
</div>

<script>
    // --- MOLARITY LOGIC ---
    function runMolarityPro() {
        const mass = parseFloat(document.getElementById('mol-mass').value);
        const mm = parseFloat(document.getElementById('mol-mm').value);
        const vol = parseFloat(document.getElementById('mol-vol').value) / 1000; // Convert to Liters
        const res = document.getElementById('res-molar');

        if (isNaN(mass) || isNaN(mm) || isNaN(vol) || mm === 0 || vol === 0) return;

        const moles = mass / mm;
        const molarity = moles / vol;

        res.innerHTML = `Moles of Solute: <b>${moles.toFixed(3)} mol</b><br>Concentration: <b style="color:#10b981; font-size:1.1rem">${molarity.toFixed(3)} M (mol/L)</b>`;
        res.classList.add('show');
    }

    // --- MOLE BRIDGE LOGIC ---
    function syncMoles(source) {
        const mm = parseFloat(document.getElementById('mp-mm').value);
        const massIn = document.getElementById('mp-mass');
        const moleIn = document.getElementById('mp-n');
        const info = document.getElementById('res-mole-sync');
        const NA = 6.022e23;

        if (isNaN(mm) || mm === 0) {
            info.innerHTML = "Please set Molar Mass first.";
            return;
        }

        let moles = 0;
        if (source === 'mass') {
            moles = parseFloat(massIn.value) / mm;
            moleIn.value = moles.toFixed(4);
        } else {
            moles = parseFloat(moleIn.value);
            massIn.value = (moles * mm).toFixed(2);
        }

        if (isNaN(moles)) return;

        const particles = (moles * NA).toExponential(3);
        info.innerHTML = `Total Particles: <b style="color:#8b5cf6">${particles}</b><br><small>Formula: n × N<sub>A</sub></small>`;
    }
</script>
<div class="tool-card" data-category="physics" data-tool-id="gas-pro" data-tags="physics chemistry gas law thermodynamics pcm jee">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(245, 158, 11, 0.1); color:#f59e0b">
            <i class="fas fa-wind"></i>
        </div>
        <div class="tool-meta">
            <h3>Ideal Gas Master</h3>
            <p>Solve P, V, n, or T using PV = nRT.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
            <div class="input-group"><label>Pressure (P) atm</label><input type="number" id="gas-p" placeholder="P"></div>
            <div class="input-group"><label>Volume (V) L</label><input type="number" id="gas-v" placeholder="V"></div>
            <div class="input-group"><label>Moles (n)</label><input type="number" id="gas-n" placeholder="n"></div>
            <div class="input-group"><label>Temp (T) K</label><input type="number" id="gas-t" placeholder="T"></div>
        </div>
        
        <button class="primary-calc-btn" style="background:#f59e0b; margin-top:15px;" onclick="runIdealGasPro()">
            <i class="fas fa-gauge-high"></i> Solve Equation
        </button>

        <div class="res-display" id="res-gas">
            <span class="placeholder">Enter 3 values to find the 4th...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('gas-pro', 'png')"><i class="fas fa-image"></i> PNG</button>
        <button class="export-btn" onclick="universalExport('gas-pro', 'pdf')"><i class="fas fa-file-pdf"></i> PDF</button>
    </div>
</div>

<div class="tool-card" data-category="physics" data-tool-id="heat-pro" data-tags="physics thermodynamics heat specific capacity pcm jee">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(239, 68, 68, 0.1); color:#ef4444">
            <i class="fas fa-fire"></i>
        </div>
        <div class="tool-meta">
            <h3>Specific Heat Pro</h3>
            <p>Calculate heat energy (Q) absorbed.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-field">
                <label>Mass (kg)</label>
                <input type="number" id="ht-m" placeholder="e.g. 2">
            </div>
            <div class="input-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 10px;">
                <div class="input-group"><label>Spec. Heat (J/kgK)</label><input type="number" id="ht-c" placeholder="4186 for Water"></div>
                <div class="input-group"><label>ΔTemp (K/°C)</label><input type="number" id="ht-dt" placeholder="Change"></div>
            </div>
        </div>
        
        <button class="primary-calc-btn" style="background:#ef4444; margin-top:15px;" onclick="runHeatPro()">
            <i class="fas fa-temperature-arrow-up"></i> Find Energy (Q)
        </button>

        <div class="res-display" id="res-heat">
            <span class="placeholder">Awaiting thermal data...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('heat-pro', 'png')"><i class="fas fa-image"></i> Save Result</button>
    </div>
</div>

<script>
    // --- IDEAL GAS LOGIC ---
    function runIdealGasPro() {
        let p = parseFloat(document.getElementById('gas-p').value);
        let v = parseFloat(document.getElementById('gas-v').value);
        let n = parseFloat(document.getElementById('gas-n').value);
        let t = parseFloat(document.getElementById('gas-t').value);
        const R = 0.0821; // atm·L/mol·K
        const res = document.getElementById('res-gas');

        const inputs = [p, v, n, t].filter(x => !isNaN(x));
        if (inputs.length < 3) {
            res.innerHTML = "Error: Enter at least 3 variables.";
            res.classList.add('show');
            return;
        }

        let resultText = "";
        if (isNaN(p)) { p = (n * R * t) / v; resultText = `Pressure (P): <b>${p.toFixed(3)} atm</b>`; }
        else if (isNaN(v)) { v = (n * R * t) / p; resultText = `Volume (V): <b>${v.toFixed(3)} L</b>`; }
        else if (isNaN(n)) { n = (p * v) / (R * t); resultText = `Amount (n): <b>${n.toFixed(4)} moles</b>`; }
        else if (isNaN(t)) { t = (p * v) / (n * R); resultText = `Temperature (T): <b>${t.toFixed(2)} K</b>`; }

        res.innerHTML = resultText;
        res.classList.add('show');
    }

    // --- SPECIFIC HEAT LOGIC ---
    function runHeatPro() {
        const m = parseFloat(document.getElementById('ht-m').value);
        const c = parseFloat(document.getElementById('ht-c').value);
        const dt = parseFloat(document.getElementById('ht-dt').value);
        const res = document.getElementById('res-heat');

        if (isNaN(m) || isNaN(c) || isNaN(dt)) return;

        const Q = m * c * dt;
        res.innerHTML = `Heat Energy (Q): <b style="color:#ef4444; font-size:1.1rem">${Q.toLocaleString()} Joules</b><br><small>(${ (Q/1000).toFixed(2) } kJ)</small>`;
        res.classList.add('show');
    }
</script>
<div class="tool-card" data-category="physics" data-tool-id="resistor-pro" data-tags="physics electricity resistor series parallel pcm jee">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(99, 102, 241, 0.1); color:var(--primary)">
            <i class="fas fa-microchip"></i>
        </div>
        <div class="tool-meta">
            <h3>Resistance Architect</h3>
            <p>Calculate Eq. Resistance (Series/Parallel).</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-field">
                <label>Configuration Type</label>
                <select id="res-mode">
                    <option value="series">Series (R1 + R2 + ...)</option>
                    <option value="parallel">Parallel (1/R1 + 1/R2 + ...)</option>
                </select>
            </div>
            <div class="input-field" style="margin-top:15px;">
                <label>Resistor Values (comma separated Ω)</label>
                <input type="text" id="res-values" placeholder="e.g. 10, 20, 30">
            </div>
        </div>
        
        <button class="primary-calc-btn" onclick="runResistorPro()">
            <i class="fas fa-wave-square"></i> Find Req
        </button>

        <div class="res-display" id="res-result">
            <span class="placeholder">Enter values to compute...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('resistor-pro', 'png')"><i class="fas fa-image"></i> PNG</button>
        <button class="export-btn" onclick="universalExport('resistor-pro', 'pdf')"><i class="fas fa-file-pdf"></i> PDF</button>
    </div>
</div>

<div class="tool-card" data-category="physics" data-tool-id="cap-pro" data-tags="physics electricity capacitor energy pcm jee">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(16, 185, 129, 0.1); color:#10b981">
            <i class="fas fa-battery-half"></i>
        </div>
        <div class="tool-meta">
            <h3>Capacitor Energy Pro</h3>
            <p>Solve Energy (U) using C and V.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                <div class="input-group">
                    <label>Capacitance (μF)</label>
                    <input type="number" id="cap-c" placeholder="C">
                </div>
                <div class="input-group">
                    <label>Voltage (V)</label>
                    <input type="number" id="cap-v" placeholder="V">
                </div>
            </div>
        </div>
        
        <button class="primary-calc-btn" style="background:#10b981; margin-top:20px;" onclick="runCapPro()">
            <i class="fas fa-bolt"></i> Find Energy (Joules)
        </button>

        <div class="res-display" id="res-cap">
            <span class="placeholder">Awaiting circuit data...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('cap-pro', 'png')"><i class="fas fa-image"></i> Save PNG</button>
    </div>
</div>

<script>
    // --- RESISTOR LOGIC ---
    function runResistorPro() {
        const mode = document.getElementById('res-mode').value;
        const input = document.getElementById('res-values').value;
        const res = document.getElementById('res-result');
        
        const vals = input.split(',').map(x => parseFloat(x.trim())).filter(x => !isNaN(x));
        
        if (vals.length === 0) return;

        let req = 0;
        if (mode === 'series') {
            req = vals.reduce((a, b) => a + b, 0);
        } else {
            req = 1 / vals.reduce((a, b) => a + (1 / b), 0);
        }

        res.innerHTML = `Equivalent Resistance: <b style="color:var(--primary); font-size:1.1rem">${req.toFixed(2)} Ω</b><br><small>Total Components: ${vals.length}</small>`;
        res.classList.add('show');
    }

    // --- CAPACITOR LOGIC ---
    function runCapPro() {
        const c = parseFloat(document.getElementById('cap-c').value) * 1e-6; // Convert μF to F
        const v = parseFloat(document.getElementById('cap-v').value);
        const res = document.getElementById('res-cap');

        if (isNaN(c) || isNaN(v)) return;

        const energy = 0.5 * c * (v * v);
        res.innerHTML = `Stored Energy (U): <b>${energy.toExponential(3)} J</b><br><small>(${ (energy * 1000).toFixed(3) } mJ)</small>`;
        res.classList.add('show');
    }
</script>
<div class="tool-card" data-category="chemistry" data-tool-id="hydro-pro" data-tags="chemistry organic alkane alkene alkyne pcm jee">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(16, 185, 129, 0.1); color:#10b981">
            <i class="fas fa-bong"></i>
        </div>
        <div class="tool-meta">
            <h3>Hydrocarbon Master</h3>
            <p>Generate formulas for Alkanes, Alkenes, Alkynes.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-field">
                <label>Number of Carbon Atoms (n)</label>
                <input type="number" id="hydro-n" placeholder="e.g. 4" oninput="runHydroPro()">
            </div>
        </div>
        
        <div class="res-display show res-success" id="res-hydro" style="text-align: left; font-size: 0.85rem;">
            <span class="placeholder">Enter C-count to see series...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('hydro-pro', 'png')"><i class="fas fa-image"></i> PNG</button>
        <button class="export-btn" onclick="universalExport('hydro-pro', 'pdf')"><i class="fas fa-file-pdf"></i> PDF</button>
    </div>
</div>

<div class="tool-card" data-category="chemistry" data-tool-id="dbe-pro" data-tags="chemistry organic dbe unsaturation pcm jee">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(245, 158, 11, 0.1); color:#f59e0b">
            <i class="fas fa-circle-nodes"></i>
        </div>
        <div class="tool-meta">
            <h3>Unsaturation (DBE) Solver</h3>
            <p>Find rings + pi-bonds in a molecule.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
            <div class="input-group"><label>Carbons (C)</label><input type="number" id="dbe-c" placeholder="C"></div>
            <div class="input-group"><label>Hydrogens (H)</label><input type="number" id="dbe-h" placeholder="H"></div>
            <div class="input-group"><label>Halogens (X)</label><input type="number" id="dbe-x" placeholder="X" value="0"></div>
            <div class="input-group"><label>Nitrogens (N)</label><input type="number" id="dbe-n" placeholder="N" value="0"></div>
        </div>
        
        <button class="primary-calc-btn" style="background:#f59e0b; margin-top:15px;" onclick="runDbePro()">
            <i class="fas fa-microscope"></i> Calculate DBE
        </button>

        <div class="res-display" id="res-dbe">
            <span class="placeholder">Enter molecular data...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('dbe-pro', 'png')"><i class="fas fa-image"></i> Save Result</button>
    </div>
</div>

<script>
    // --- HYDROCARBON LOGIC ---
    function runHydroPro() {
        const n = parseInt(document.getElementById('hydro-n').value);
        const res = document.getElementById('res-hydro');

        if (isNaN(n) || n <= 0) return;

        res.innerHTML = `
            <div style="line-height: 1.8;">
                Alkane (Saturated): <b style="color:#10b981">C${n}H${2*n+2}</b><br>
                Alkene (1 Double Bond): <b style="color:var(--primary)">C${n}H${2*n}</b><br>
                Alkyne (1 Triple Bond): <b style="color:#ef4444">C${n}H${2*n-2}</b>
            </div>
        `;
    }

    // --- DBE LOGIC ---
    function runDbePro() {
        const c = parseFloat(document.getElementById('dbe-c').value) || 0;
        const h = parseFloat(document.getElementById('dbe-h').value) || 0;
        const x = parseFloat(document.getElementById('dbe-x').value) || 0;
        const n = parseFloat(document.getElementById('dbe-n').value) || 0;
        const res = document.getElementById('res-dbe');

        if (c === 0) return;

        // Formula: C + 1 - H/2 - X/2 + N/2
        const dbe = c + 1 - (h / 2) - (x / 2) + (n / 2);

        res.innerHTML = `Degree of Unsaturation: <b style="font-size:1.2rem; color:#f59e0b">${dbe}</b><br>
                        <small>Possible: ${Math.floor(dbe)} rings or pi-bonds.</small>`;
        res.classList.add('show');
    }
</script>
<div class="tool-card" data-category="physics" data-tool-id="optics-pro" data-tags="physics optics lens mirror magnification pcm jee">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(99, 102, 241, 0.1); color:var(--primary)">
            <i class="fas fa-glasses"></i>
        </div>
        <div class="tool-meta">
            <h3>Optics Architect</h3>
            <p>Solve Lens/Mirror formulas with Sign Convention.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-field">
                <label>Instrument Type</label>
                <select id="optics-mode">
                    <option value="mirror">Spherical Mirror (1/v + 1/u = 1/f)</option>
                    <option value="lens">Thin Lens (1/v - 1/u = 1/f)</option>
                </select>
            </div>
            <div class="input-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 15px;">
                <div class="input-group"><label>Focal Length (f)</label><input type="number" id="opt-f" placeholder="f"></div>
                <div class="input-group"><label>Object Dist (u)</label><input type="number" id="opt-u" placeholder="u (usually negative)"></div>
            </div>
        </div>
        
        <button class="primary-calc-btn" onclick="runOpticsPro()">
            <i class="fas fa-eye"></i> Trace Image
        </button>

        <div class="res-display" id="res-optics">
            <span class="placeholder">Enter distances (cm/m)...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('optics-pro', 'png')"><i class="fas fa-image"></i> PNG</button>
        <button class="export-btn" onclick="universalExport('optics-pro', 'pdf')"><i class="fas fa-file-pdf"></i> PDF</button>
    </div>
</div>

<div class="tool-card" data-category="physics" data-tool-id="wave-pro" data-tags="physics waves frequency wavelength speed pcm jee">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(239, 68, 68, 0.1); color:#ef4444">
            <i class="fas fa-wave-square"></i>
        </div>
        <div class="tool-meta">
            <h3>Wave-Frequency Bridge</h3>
            <p>Sync Velocity, Frequency & Wavelength.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-field">
                <label>Wave Velocity (v) m/s</label>
                <input type="number" id="wv-v" placeholder="e.g. 3e8 for light" value="300000000">
            </div>
            <div class="input-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px;">
                <div class="input-field">
                    <label>Frequency (f) Hz</label>
                    <input type="number" id="wv-f" placeholder="f" oninput="syncWave('f')">
                </div>
                <div class="input-field">
                    <label>Wavelength (λ) m</label>
                    <input type="number" id="wv-l" placeholder="λ" oninput="syncWave('l')">
                </div>
            </div>
        </div>
        
        <div class="res-display show res-success" id="res-wave-info" style="font-size: 0.8rem;">
            Enter values to sync wave data...
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('wave-pro', 'png')"><i class="fas fa-image"></i> PNG</button>
    </div>
</div>

<script>
    // --- OPTICS LOGIC ---
    function runOpticsPro() {
        const mode = document.getElementById('optics-mode').value;
        const f = parseFloat(document.getElementById('opt-f').value);
        const u = parseFloat(document.getElementById('opt-u').value);
        const res = document.getElementById('res-optics');

        if (isNaN(f) || isNaN(u) || u === 0) return;

        let v;
        if (mode === 'mirror') {
            v = 1 / ((1 / f) - (1 / u));
        } else {
            v = 1 / ((1 / f) + (1 / u));
        }

        const m = -(v / u); // Magnification
        let nature = m > 0 ? "Virtual & Erect" : "Real & Inverted";
        let size = Math.abs(m) > 1 ? "Magnified" : "Diminished";

        res.innerHTML = `Image Distance (v): <b>${v.toFixed(2)}</b><br>
                        Magnification (m): <b>${m.toFixed(2)}</b><br>
                        Nature: <b style="color:var(--primary)">${nature} (${size})</b>`;
        res.classList.add('show');
    }

    // --- WAVE SYNC LOGIC ---
    function syncWave(source) {
        const v = parseFloat(document.getElementById('wv-v').value);
        const fIn = document.getElementById('wv-f');
        const lIn = document.getElementById('wv-l');
        const info = document.getElementById('res-wave-info');

        if (isNaN(v) || v === 0) return;

        if (source === 'f') {
            const f = parseFloat(fIn.value);
            if (!isNaN(f) && f !== 0) {
                lIn.value = (v / f).toExponential(3);
            }
        } else {
            const l = parseFloat(lIn.value);
            if (!isNaN(l) && l !== 0) {
                fIn.value = (v / l).toExponential(3);
            }
        }
        
        info.innerHTML = `Calculation: <b>v = f × λ</b><br>Result in scientific notation.`;
    }
</script>
<div class="tool-card" data-category="math" data-tool-id="vector-pro" data-tags="math vector dot cross product physics pcm jee">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(139, 92, 246, 0.1); color:#8b5cf6">
            <i class="fas fa-arrows-to-dot"></i>
        </div>
        <div class="tool-meta">
            <h3>Vector Ops Master</h3>
            <p>Calculate Dot/Cross Product & Angle.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <label style="font-size:0.7rem; color:var(--text-dim);">VECTOR A (xi + yj + zk)</label>
            <div class="input-row" style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 5px;">
                <input type="number" id="vax" placeholder="x">
                <input type="number" id="vay" placeholder="y">
                <input type="number" id="vaz" placeholder="z">
            </div>
            <label style="font-size:0.7rem; color:var(--text-dim); margin-top:10px; display:block;">VECTOR B (xi + yj + zk)</label>
            <div class="input-row" style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 5px;">
                <input type="number" id="vbx" placeholder="x">
                <input type="number" id="vby" placeholder="y">
                <input type="number" id="vbz" placeholder="z">
            </div>
        </div>
        
        <button class="primary-calc-btn" style="background:#8b5cf6" onclick="runVectorPro()">
            <i class="fas fa-compass"></i> Compute Vectors
        </button>

        <div class="res-display" id="res-vector">
            <span class="placeholder">Awaiting components...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('vector-pro', 'png')"><i class="fas fa-image"></i> PNG</button>
        <button class="export-btn" onclick="universalExport('vector-pro', 'pdf')"><i class="fas fa-file-pdf"></i> PDF</button>
    </div>
</div>

<div class="tool-card" data-category="math" data-tool-id="dist3d-pro" data-tags="math geometry 3d distance coordinate pcm jee">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(16, 185, 129, 0.1); color:#10b981">
            <i class="fas fa-cube"></i>
        </div>
        <div class="tool-meta">
            <h3>3D Distance Pro</h3>
            <p>Find distance between two 3D points.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-row" style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 5px;">
                <input type="number" id="p1x" placeholder="x1">
                <input type="number" id="p1y" placeholder="y1">
                <input type="number" id="p1z" placeholder="z1">
            </div>
            <div style="text-align:center; font-size:0.7rem; margin:5px 0;">to</div>
            <div class="input-row" style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 5px;">
                <input type="number" id="p2x" placeholder="x2">
                <input type="number" id="p2y" placeholder="y2">
                <input type="number" id="p2z" placeholder="z2">
            </div>
        </div>
        
        <button class="primary-calc-btn" style="background:#10b981; margin-top:15px;" onclick="runDist3DPro()">
            <i class="fas fa-ruler-combined"></i> Calculate Distance
        </button>

        <div class="res-display" id="res-dist3d">
            <span class="placeholder">Enter coordinates...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('dist3d-pro', 'png')"><i class="fas fa-image"></i> Save PNG</button>
    </div>
</div>

<script>
    // --- VECTOR LOGIC ---
    function runVectorPro() {
        const ax = parseFloat(document.getElementById('vax').value) || 0;
        const ay = parseFloat(document.getElementById('vay').value) || 0;
        const az = parseFloat(document.getElementById('vaz').value) || 0;
        const bx = parseFloat(document.getElementById('vbx').value) || 0;
        const by = parseFloat(document.getElementById('vby').value) || 0;
        const bz = parseFloat(document.getElementById('vbz').value) || 0;
        const res = document.getElementById('res-vector');

        // Dot Product
        const dot = (ax * bx) + (ay * by) + (az * bz);
        
        // Cross Product
        const cx = (ay * bz) - (az * by);
        const cy = (az * bx) - (ax * bz);
        const cz = (ax * by) - (ay * bx);

        // Angle
        const magA = Math.sqrt(ax*ax + ay*ay + az*az);
        const magB = Math.sqrt(bx*bx + by*by + bz*bz);
        const cosTheta = dot / (magA * magB);
        const angle = (Math.acos(cosTheta) * (180 / Math.PI)).toFixed(2);

        res.innerHTML = `Dot Product: <b>${dot}</b><br>
                        Cross: <b style="color:#8b5cf6">${cx}i + ${cy}j + ${cz}k</b><br>
                        Angle θ: <b>${angle}°</b>`;
        res.classList.add('show');
    }

    // --- 3D DISTANCE LOGIC ---
    function runDist3DPro() {
        const x1 = parseFloat(document.getElementById('p1x').value) || 0;
        const y1 = parseFloat(document.getElementById('p1y').value) || 0;
        const z1 = parseFloat(document.getElementById('p1z').value) || 0;
        const x2 = parseFloat(document.getElementById('p2x').value) || 0;
        const y2 = parseFloat(document.getElementById('p2y').value) || 0;
        const z2 = parseFloat(document.getElementById('p2z').value) || 0;
        const res = document.getElementById('res-dist3d');

        const dist = Math.sqrt(Math.pow(x2-x1, 2) + Math.pow(y2-y1, 2) + Math.pow(z2-z1, 2));

        res.innerHTML = `Distance (d): <b style="font-size:1.2rem; color:#10b981">${dist.toFixed(4)} units</b>`;
        res.classList.add('show');
    }
</script>
<div class="tool-card" data-category="physics" data-tool-id="decay-pro" data-tags="physics modern nuclear half life radioactivity pcm jee">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(239, 68, 68, 0.1); color:#ef4444">
            <i class="fas fa-atom"></i>
        </div>
        <div class="tool-meta">
            <h3>Radioactive Decay Pro</h3>
            <p>Solve Remaining Amount & Half-Life.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-field">
                <label>Initial Amount (N₀)</label>
                <input type="number" id="dec-n0" placeholder="e.g. 100">
            </div>
            <div class="input-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 10px;">
                <div class="input-group"><label>Half-Life (T½)</label><input type="number" id="dec-th" placeholder="Time"></div>
                <div class="input-group"><label>Time Passed (t)</label><input type="number" id="dec-t" placeholder="Time"></div>
            </div>
        </div>
        
        <button class="primary-calc-btn" style="background:#ef4444" onclick="runDecayPro()">
            <i class="fas fa-radiation"></i> Calculate Decay
        </button>

        <div class="res-display" id="res-decay">
            <span class="placeholder">Enter N₀, T½, and t...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('decay-pro', 'png')"><i class="fas fa-image"></i> PNG</button>
        <button class="export-btn" onclick="universalExport('decay-pro', 'pdf')"><i class="fas fa-file-pdf"></i> PDF</button>
    </div>
</div>

<div class="tool-card" data-category="physics" data-tool-id="db-pro" data-tags="physics modern quantum de broglie pcm jee">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(59, 130, 246, 0.1); color:#3b82f6">
            <i class="fas fa-wave-square"></i>
        </div>
        <div class="tool-meta">
            <h3>Quantum Wave Master</h3>
            <p>Solve De Broglie λ for particles.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-field">
                <label>Mass (kg)</label>
                <input type="number" id="db-m" placeholder="e.g. 9.1e-31 for electron">
            </div>
            <div class="input-field" style="margin-top:10px;">
                <label>Velocity (v) m/s</label>
                <input type="number" id="db-v" placeholder="e.g. 2e6">
            </div>
        </div>
        
        <button class="primary-calc-btn" style="background:#3b82f6" onclick="runDbPro()">
            <i class="fas fa-bolt-lightning"></i> Find Wavelength
        </button>

        <div class="res-display" id="res-db">
            <span class="placeholder">Awaiting particle data...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('db-pro', 'png')"><i class="fas fa-image"></i> Save PNG</button>
    </div>
</div>

<script>
    // --- DECAY LOGIC ---
    function runDecayPro() {
        const n0 = parseFloat(document.getElementById('dec-n0').value);
        const th = parseFloat(document.getElementById('dec-th').value);
        const t = parseFloat(document.getElementById('dec-t').value);
        const res = document.getElementById('res-decay');

        if (isNaN(n0) || isNaN(th) || isNaN(t)) return;

        const n = n0 * Math.pow(0.5, (t / th));
        const decayConst = 0.693 / th;

        res.innerHTML = `Remaining (N): <b style="color:#ef4444">${n.toFixed(4)}</b><br>
                        Decay Constant (λ): <b>${decayConst.toFixed(5)} /unit time</b>`;
        res.classList.add('show');
    }

    // --- DE BROGLIE LOGIC ---
    function runDbPro() {
        const m = parseFloat(document.getElementById('db-m').value);
        const v = parseFloat(document.getElementById('db-v').value);
        const res = document.getElementById('res-db');
        const h = 6.626e-34; // Planck's constant

        if (isNaN(m) || isNaN(v) || v === 0) return;

        const lambda = h / (m * v);

        res.innerHTML = `Wavelength (λ): <b style="color:#3b82f6">${lambda.toExponential(4)} m</b><br>
                        <small>Momentum (p): ${(m * v).toExponential(2)} kg·m/s</small>`;
        res.classList.add('show');
    }
</script>
<footer class="site-footer">
    <div class="container footer-content">
        <div class="footer-brand">
            <div class="logo-text">STUDYTOOLS <span class="accent">INDIA</span></div>
            <p class="brand-bio">The most advanced academic toolkit engineered for PCM students in India. Precision-driven, mobile-first, and always free.</p>
        </div>
        
        <div class="footer-links">
            <div class="link-col">
                <h4>Support</h4>
                <a href="javascript:void(0)" onclick="openLegal('terms')">Terms & Conditions</a>
                <a href="javascript:void(0)" onclick="openLegal('privacy')">Privacy Policy</a>
            </div>
            <div class="link-col">
                <h4>Connect</h4>
                <a href="https://instagram.com/vibevaultreels" target="_blank">Instagram</a>
                <a href="https://github.com/return7521-ui" target="_blank">GitHub</a>
            </div>
        </div>
    </div>
    
    <div class="footer-bottom">
        <div class="container">
            <p>&copy; <span id="current-year"></span> StudyTools India. All Rights Reserved. | Founded by <b>Shashank Kushwaha</b></p>
        </div>
    </div>
</footer>

<div class="modal-overlay" id="legal-modal">
    <div class="modal-box">
        <div class="modal-header">
            <h2 id="modal-title">Legal Document</h2>
            <button class="close-modal" onclick="closeLegal()">&times;</button>
        </div>
        <div class="modal-body" id="modal-content">
            </div>
    </div>
</div>

<style>
    /* --- FOOTER STYLING --- */
    .site-footer { background: var(--card-glass); border-top: 1px solid var(--border-glass); padding: 50px 0 0; margin-top: 80px; }
    body.dark-mode .site-footer { background: var(--bg-dark); }
    
    .footer-content { display: grid; grid-template-columns: 2fr 1fr; gap: 40px; padding-bottom: 40px; }
    @media (max-width: 768px) { .footer-content { grid-template-columns: 1fr; text-align: center; } }

    .brand-bio { font-size: 0.85rem; color: var(--text-dim); margin-top: 15px; max-width: 400px; }
    @media (max-width: 768px) { .brand-bio { margin: 15px auto; } }

    .footer-links { display: flex; gap: 40px; }
    @media (max-width: 768px) { .footer-links { justify-content: center; } }
    
    .link-col h4 { font-size: 0.9rem; margin-bottom: 15px; color: var(--primary); text-transform: uppercase; letter-spacing: 1px; }
    .link-col a { display: block; font-size: 0.85rem; color: var(--text-dim); text-decoration: none; margin-bottom: 8px; transition: 0.3s; }
    .link-col a:hover { color: var(--primary); transform: translateX(5px); }

    .footer-bottom { padding: 20px 0; border-top: 1px solid var(--border-glass); text-align: center; font-size: 0.75rem; color: var(--text-dim); }

    /* --- MODAL STYLING --- */
    .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); backdrop-filter: blur(10px); z-index: 3000; display: none; align-items: center; justify-content: center; padding: 20px; }
    .modal-overlay.active { display: flex; animation: fadeIn 0.3s ease; }

    .modal-box { background: white; width: 100%; max-width: 700px; border-radius: 24px; max-height: 85vh; overflow-y: auto; position: relative; }
    body.dark-mode .modal-box { background: #1e293b; color: white; }
    
    .modal-header { padding: 25px; border-bottom: 1px solid var(--border-glass); display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; background: inherit; }
    .close-modal { background: none; border: none; font-size: 2rem; color: var(--text-dim); cursor: pointer; }
    
    .modal-body { padding: 30px; font-size: 0.9rem; line-height: 1.7; color: var(--text-dim); }
    body.dark-mode .modal-body { color: #cbd5e1; }
    .modal-body b { color: var(--primary); }

    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
</style>

<script>
    // Update Year
    document.getElementById('current-year').innerText = new Date().getFullYear();

    const legalDocs = {
        terms: {
            title: "Terms & Conditions",
            body: "Welcome to <b>StudyTools India</b>. By using our platform, you agree to follow our academic integrity guidelines. Our tools are for educational verification only. All calculation logic is provided as-is without legal warranty. <b>Commercial reproduction</b> of our code or branding is strictly prohibited."
        },
        privacy: {
            title: "Privacy Policy",
            body: "We value your privacy. <b>StudyTools India</b> does not store your calculation data on our servers. All processing happens locally on your device (Client-Side). Our export features use your local browser memory to generate PDF/PNG files. We do not track personal identity."
        }
    };

    function openLegal(docKey) {
        const doc = legalDocs[docKey];
        document.getElementById('modal-title').innerText = doc.title;
        document.getElementById('modal-content').innerHTML = doc.body;
        document.getElementById('legal-modal').classList.add('active');
        document.body.style.overflow = 'hidden'; // Prevent scroll
    }

    function closeLegal() {
        document.getElementById('legal-modal').classList.remove('active');
        document.body.style.overflow = 'auto';
    }
</script>
<div class="tool-card" data-category="academic" data-tool-id="marksheet-pro" data-tags="academic marks percentage boards isc cbse pcm">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(99, 102, 241, 0.1); color:var(--primary)">
            <i class="fas fa-file-invoice"></i>
        </div>
        <div class="tool-meta">
            <h3>Marksheet Architect</h3>
            <p>Calculate Total & Best-of-5 Percentage.</p>
        </div>
    </div>

    <div class="tool-body">
        <div id="subject-container" class="input-stack">
            <div class="input-row subject-row" style="display: grid; grid-template-columns: 2fr 1fr; gap: 8px; margin-bottom: 8px;">
                <input type="text" placeholder="Subject Name" class="sub-name">
                <input type="number" placeholder="Marks" class="sub-marks">
            </div>
        </div>
        
        <div class="multi-btn-row" style="display: flex; gap: 10px; margin-top: 10px;">
            <button class="secondary-btn" onclick="addSubjectRow()" style="flex: 1; padding: 8px; border-radius: 8px; border: 1px dashed var(--primary); background: transparent; color: var(--primary); cursor: pointer;">
                <i class="fas fa-plus"></i> Add Sub
            </button>
            <button class="primary-calc-btn" style="flex: 2; margin-top: 0;" onclick="runMarksheetPro()">
                <i class="fas fa-calculator"></i> Generate Report
            </button>
        </div>

        <div class="res-display" id="res-marksheet">
            <span class="placeholder">Add subjects and calculate...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('marksheet-pro', 'pdf')"><i class="fas fa-file-pdf"></i> Download PDF</button>
        <button class="export-btn" onclick="universalExport('marksheet-pro', 'png')"><i class="fas fa-image"></i> PNG</button>
    </div>
</div>

<div class="tool-card" data-category="academic" data-tool-id="grade-pro" data-tags="academic grade gpa percentage pcm">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(16, 185, 129, 0.1); color:#10b981">
            <i class="fas fa-graduation-cap"></i>
        </div>
        <div class="tool-meta">
            <h3>Grade & GPA Pro</h3>
            <p>Convert % to Grades and 4.0 GPA.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-field">
                <label>Enter Percentage (%)</label>
                <input type="number" id="grade-perc" placeholder="e.g. 92" oninput="runGradePro()">
            </div>
        </div>
        
        <div class="res-display show res-success" id="res-grade-info" style="text-align: left; font-size: 0.85rem;">
            <span class="placeholder">Enter percentage...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('grade-pro', 'png')"><i class="fas fa-image"></i> Save Result</button>
    </div>
</div>

<script>
    // --- MARKSHEET LOGIC ---
    function addSubjectRow() {
        const container = document.getElementById('subject-container');
        const div = document.createElement('div');
        div.className = "input-row subject-row";
        div.style = "display: grid; grid-template-columns: 2fr 1fr; gap: 8px; margin-bottom: 8px;";
        div.innerHTML = `<input type="text" placeholder="Subject Name" class="sub-name">
                         <input type="number" placeholder="Marks" class="sub-marks">`;
        container.appendChild(div);
    }

    function runMarksheetPro() {
        const marksInputs = document.querySelectorAll('.sub-marks');
        const res = document.getElementById('res-marksheet');
        let marks = [];
        
        marksInputs.forEach(input => {
            let val = parseFloat(input.value);
            if (!isNaN(val)) marks.push(val);
        });

        if (marks.length === 0) return;

        const total = marks.reduce((a, b) => a + b, 0);
        const avg = total / marks.length;
        
        // Best of 5 Logic
        let best5 = 0;
        if (marks.length >= 5) {
            const sorted = [...marks].sort((a, b) => b - a);
            best5 = sorted.slice(0, 5).reduce((a, b) => a + b, 0) / 5;
        }

        res.innerHTML = `Overall: <b>${avg.toFixed(2)}%</b><br>
                        Total Marks: <b>${total}</b><br>
                        ${marks.length >= 5 ? `Best of 5: <b style="color:var(--primary)">${best5.toFixed(2)}%</b>` : ''}`;
        res.classList.add('show');
    }

    // --- GRADE & GPA LOGIC ---
    function runGradePro() {
        const p = parseFloat(document.getElementById('grade-perc').value);
        const info = document.getElementById('res-grade-info');

        if (isNaN(p)) return;

        let grade, gpa;
        if (p >= 91) { grade = "A1"; gpa = "4.0"; }
        else if (p >= 81) { grade = "A2"; gpa = "3.7"; }
        else if (p >= 71) { grade = "B1"; gpa = "3.3"; }
        else if (p >= 61) { grade = "B2"; gpa = "3.0"; }
        else if (p >= 51) { grade = "C1"; gpa = "2.7"; }
        else { grade = "Pass"; gpa = "2.0"; }

        info.innerHTML = `Grade: <b style="color:#10b981">${grade}</b> | GPA: <b>${gpa}</b><br>
                         <small>Based on Indian Standard Conversion</small>`;
    }
            </script>
            <div class="tool-card" data-category="finance" data-tool-id="pl-pro" data-tags="finance profit loss business money pcm">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(16, 185, 129, 0.1); color:#10b981">
            <i class="fas fa-chart-line"></i>
        </div>
        <div class="tool-meta">
            <h3>Profit & Loss Pro</h3>
            <p>Calculate margins and breakeven points.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <div class="input-field">
                    <label>Cost Price (₹)</label>
                    <input type="number" id="pl-cp" placeholder="e.g. 500">
                </div>
                <div class="input-field">
                    <label>Selling Price (₹)</label>
                    <input type="number" id="pl-sp" placeholder="e.g. 650">
                </div>
            </div>
        </div>
        
        <button class="primary-calc-btn" style="background:#10b981" onclick="runPlPro()">
            <i class="fas fa-coins"></i> Analyze Margin
        </button>

        <div class="res-display" id="res-pl">
            <span class="placeholder">Enter CP and SP...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('pl-pro', 'png')"><i class="fas fa-image"></i> PNG</button>
        <button class="export-btn" onclick="universalExport('pl-pro', 'pdf')"><i class="fas fa-file-pdf"></i> PDF</button>
    </div>
</div>

<div class="tool-card" data-category="finance" data-tool-id="gst-pro" data-tags="finance gst tax india business money pcm">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(79, 70, 229, 0.1); color:#4f46e5">
            <i class="fas fa-receipt"></i>
        </div>
        <div class="tool-meta">
            <h3>GST Intelligence</h3>
            <p>Calculate CGST, SGST & Net Total.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-row" style="display: grid; grid-template-columns: 2fr 1fr; gap: 8px;">
                <div class="input-group"><label>Amount (₹)</label><input type="number" id="gst-amt" placeholder="1000"></div>
                <div class="input-group"><label>Rate (%)</label><input type="number" id="gst-rate" value="18"></div>
            </div>
            <div class="input-field" style="margin-top:15px;">
                <label>Tax Type</label>
                <select id="gst-type">
                    <option value="excl">GST Exclusive (Add Tax)</option>
                    <option value="incl">GST Inclusive (Extract Tax)</option>
                </select>
            </div>
        </div>
        
        <button class="primary-calc-btn" style="background:#4f46e5; margin-top:20px;" onclick="runGstPro()">
            <i class="fas fa-calculator"></i> Generate Tax Invoice
        </button>

        <div class="res-display" id="res-gst">
            <span class="placeholder">Awaiting financial data...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('gst-pro', 'png')"><i class="fas fa-image"></i> Save Result</button>
    </div>
</div>

<script>
    // --- PROFIT & LOSS LOGIC ---
    function runPlPro() {
        const cp = parseFloat(document.getElementById('pl-cp').value);
        const sp = parseFloat(document.getElementById('pl-sp').value);
        const res = document.getElementById('res-pl');

        if (isNaN(cp) || isNaN(sp)) return;

        const diff = sp - cp;
        const perc = ((diff / cp) * 100).toFixed(2);
        const color = diff >= 0 ? "#10b981" : "#ef4444";
        const label = diff >= 0 ? "Profit" : "Loss";

        res.innerHTML = `${label}: <b style="color:${color}">₹${Math.abs(diff).toLocaleString('en-IN')}</b><br>
                        Percentage: <b style="color:${color}">${perc}%</b><br>
                        <small>Status: ${diff >= 0 ? 'Surplus' : 'Deficit'}</small>`;
        res.classList.add('show');
    }

    // --- GST LOGIC ---
    function runGstPro() {
        const amt = parseFloat(document.getElementById('gst-amt').value);
        const rate = parseFloat(document.getElementById('gst-rate').value);
        const type = document.getElementById('gst-type').value;
        const res = document.getElementById('res-gst');

        if (isNaN(amt) || isNaN(rate)) return;

        let gst, net;
        if (type === 'excl') {
            gst = amt * (rate / 100);
            net = amt + gst;
        } else {
            gst = amt - (amt * (100 / (100 + rate)));
            net = amt;
        }

        const halfGst = (gst / 2).toFixed(2);

        res.innerHTML = `Net Total: <b style="color:#4f46e5; font-size:1.1rem">₹${net.toLocaleString('en-IN', {maximumFractionDigits:2})}</b><br>
                        Total GST: <b>₹${gst.toFixed(2)}</b><br>
                        <small>CGST: ₹${halfGst} | SGST: ₹${halfGst}</small>`;
        res.classList.add('show');
    }
</script>
<div class="tool-card" data-category="utility" data-tool-id="age-pro" data-tags="utility time age birthday calendar pcm">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(99, 102, 241, 0.1); color:var(--primary)">
            <i class="fas fa-hourglass-half"></i>
        </div>
        <div class="tool-meta">
            <h3>Age Architect</h3>
            <p>Calculate exact age and birthday countdown.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-field">
                <label>Date of Birth</label>
                <input type="date" id="age-dob">
            </div>
        </div>
        
        <button class="primary-calc-btn" onclick="runAgePro()">
            <i class="fas fa-calendar-day"></i> Calculate Age
        </button>

        <div class="res-display" id="res-age">
            <span class="placeholder">Select your DOB...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('age-pro', 'png')"><i class="fas fa-image"></i> PNG</button>
        <button class="export-btn" onclick="universalExport('age-pro', 'pdf')"><i class="fas fa-file-pdf"></i> PDF</button>
    </div>
</div>

<div class="tool-card" data-category="utility" data-tool-id="tz-pro" data-tags="utility time zone global ist pcm">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(245, 158, 11, 0.1); color:#f59e0b">
            <i class="fas fa-earth-asia"></i>
        </div>
        <div class="tool-meta">
            <h3>Time-Zone Bridge</h3>
            <p>Sync IST with Global Time Zones.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-field">
                <label>Select Target Zone</label>
                <select id="tz-target" onchange="runTzPro()">
                    <option value="UTC">UTC (Universal)</option>
                    <option value="America/New_York">EST (New York)</option>
                    <option value="Europe/London">GMT (London)</option>
                    <option value="Asia/Tokyo">JST (Tokyo)</option>
                    <option value="America/Los_Angeles">PST (Pacific)</option>
                </select>
            </div>
        </div>
        
        <div class="res-display show res-success" id="res-tz" style="margin-top:20px; font-family: 'Roboto Mono', monospace;">
            Loading Global Clocks...
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('tz-pro', 'png')"><i class="fas fa-image"></i> Save Result</button>
    </div>
</div>

<script>
    // --- AGE ARCHITECT LOGIC ---
    function runAgePro() {
        const dobVal = document.getElementById('age-dob').value;
        const res = document.getElementById('res-age');

        if (!dobVal) return;

        const dob = new Date(dobVal);
        const now = new Date();
        
        let years = now.getFullYear() - dob.getFullYear();
        let months = now.getMonth() - dob.getMonth();
        let days = now.getDate() - dob.getDate();

        if (days < 0) {
            months--;
            days += new Date(now.getFullYear(), now.getMonth(), 0).getDate();
        }
        if (months < 0) {
            years--;
            months += 12;
        }

        res.innerHTML = `Age: <b style="color:var(--primary)">${years} Years</b><br>
                        <small>${months} Months | ${days} Days</small>`;
        res.classList.add('show');
    }

    // --- TIME-ZONE LOGIC ---
    function runTzPro() {
        const target = document.getElementById('tz-target').value;
        const res = document.getElementById('res-tz');
        
        const now = new Date();
        const options = { timeZone: target, hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true };
        const istOptions = { timeZone: 'Asia/Kolkata', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true };
        
        const targetTime = new Intl.DateTimeFormat('en-US', options).format(now);
        const istTime = new Intl.DateTimeFormat('en-US', istOptions).format(now);

        res.innerHTML = `IST: <b>${istTime}</b><br>
                        ${target.split('/')[1] || target}: <b style="color:#f59e0b">${targetTime}</b>`;
    }

    // Refresh Time Zone every second
    setInterval(runTzPro, 1000);
</script>
<div class="tool-card" data-category="utility" data-tool-id="color-pro" data-tags="cs web development design hex rgb color pcm">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(99, 102, 241, 0.1); color:var(--primary)">
            <i class="fas fa-palette"></i>
        </div>
        <div class="tool-meta">
            <h3>Color Sync Pro</h3>
            <p>Convert Hex to RGB with live preview.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-field">
                <label>Hex Color Code</label>
                <input type="text" id="color-hex" placeholder="#6366F1" maxlength="7" oninput="runColorPro()">
            </div>
        </div>
        
        <div class="res-display show" id="res-color-preview" style="height:60px; border-radius:12px; margin-top:15px; display:flex; align-items:center; justify-content:center; border:1px solid var(--border-glass);">
            <span id="res-color-text" style="font-family:'Roboto Mono'; font-weight:700;">#6366F1</span>
        </div>
        <div id="res-rgb-val" style="margin-top:10px; font-size:0.8rem; text-align:center; color:var(--text-dim);">rgb(99, 102, 241)</div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('color-pro', 'png')"><i class="fas fa-image"></i> PNG</button>
    </div>
</div>

<div class="tool-card" data-category="utility" data-tool-id="lorem-pro" data-tags="cs web design lorem ipsum placeholder pcm">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(16, 185, 129, 0.1); color:#10b981">
            <i class="fas fa-font"></i>
        </div>
        <div class="tool-meta">
            <h3>Lorem Ipsum Pro</h3>
            <p>Generate placeholder text for design.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-field">
                <label>Number of Sentences</label>
                <input type="number" id="lorem-num" value="3" min="1" max="10">
            </div>
        </div>
        
        <button class="primary-calc-btn" style="background:#10b981" onclick="runLoremPro()">
            <i class="fas fa-paragraph"></i> Generate Text
        </button>

        <div class="res-display" id="res-lorem" style="font-size:0.75rem; max-height:100px; overflow-y:auto; cursor:pointer;" onclick="copyLorem()">
            <span class="placeholder">Click generate...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="copyLorem()"><i class="fas fa-copy"></i> Copy Text</button>
    </div>
</div>

<script>
    // --- COLOR SYNC LOGIC ---
    function runColorPro() {
        let hex = document.getElementById('color-hex').value.trim();
        if (!hex.startsWith('#')) hex = '#' + hex;
        
        const preview = document.getElementById('res-color-preview');
        const text = document.getElementById('res-color-text');
        const rgbLabel = document.getElementById('res-rgb-val');

        const isValid = /^#([A-Fa-f0-9]{3}){1,2}$/.test(hex);
        
        if (isValid) {
            preview.style.backgroundColor = hex;
            text.innerText = hex.toUpperCase();
            
            // Convert to RGB
            let r = parseInt(hex.slice(1, 3), 16);
            let g = parseInt(hex.slice(3, 5), 16);
            let b = parseInt(hex.slice(5, 7), 16);
            if(hex.length === 4) {
                 r = parseInt(hex[1]+hex[1], 16);
                 g = parseInt(hex[2]+hex[2], 16);
                 b = parseInt(hex[3]+hex[3], 16);
            }
            rgbLabel.innerText = `rgb(${r}, ${g}, ${b})`;
            
            // Contrast Check
            const brightness = (r * 299 + g * 587 + b * 114) / 1000;
            text.style.color = brightness > 125 ? 'black' : 'white';
        }
    }

    // --- LOREM IPSUM LOGIC ---
    const loremBase = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. ";
    
    function runLoremPro() {
        const num = parseInt(document.getElementById('lorem-num').value) || 1;
        const res = document.getElementById('res-lorem');
        let output = "";
        for(let i=0; i<num; i++) output += loremBase;
        
        res.innerHTML = output;
        res.classList.add('show');
    }

    function copyLorem() {
        const text = document.getElementById('res-lorem').innerText;
        navigator.clipboard.writeText(text);
        alert("Text copied to clipboard!");
    }
</script>
<div class="tool-card" data-category="academic" data-tool-id="jee-pro" data-tags="academic jee main percentile rank predictor pcm">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(99, 102, 241, 0.1); color:var(--primary)">
            <i class="fas fa-graduation-cap"></i>
        </div>
        <div class="tool-meta">
            <h3>JEE Rank Predictor</h3>
            <p>Estimate All India Rank (AIR) from Percentile.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-field">
                <label>Your NTA Percentile</label>
                <input type="number" id="jee-perc" placeholder="e.g. 98.5" step="0.0001">
            </div>
            <div class="input-field" style="margin-top:10px;">
                <label>Total Candidates (Approx.)</label>
                <input type="number" id="jee-cand" value="1200000">
            </div>
        </div>
        
        <button class="primary-calc-btn" onclick="runJeePro()">
            <i class="fas fa-chart-line"></i> Predict AIR
        </button>

        <div class="res-display" id="res-jee">
            <span class="placeholder">Enter percentile to see rank...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('jee-pro', 'png')"><i class="fas fa-image"></i> PNG</button>
        <button class="export-btn" onclick="universalExport('jee-pro', 'pdf')"><i class="fas fa-file-pdf"></i> PDF</button>
    </div>
</div>

<div class="tool-card" data-category="academic" data-tool-id="nda-pro" data-tags="academic nda upsc score marks predictor pcm">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(239, 68, 68, 0.1); color:#ef4444">
            <i class="fas fa-shield-halved"></i>
        </div>
        <div class="tool-meta">
            <h3>NDA Score Estimator</h3>
            <p>Calculate marks for Maths & GAT papers.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                <div class="input-group">
                    <label>Maths Correct</label>
                    <input type="number" id="nda-mc" placeholder="Max 120">
                </div>
                <div class="input-group">
                    <label>Maths Wrong</label>
                    <input type="number" id="nda-mw" placeholder="Wrong">
                </div>
            </div>
            <div class="input-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top:10px;">
                <div class="input-group">
                    <label>GAT Correct</label>
                    <input type="number" id="nda-gc" placeholder="Max 150">
                </div>
                <div class="input-group">
                    <label>GAT Wrong</label>
                    <input type="number" id="nda-gw" placeholder="Wrong">
                </div>
            </div>
        </div>
        
        <button class="primary-calc-btn" style="background:#ef4444" onclick="runNdaPro()">
            <i class="fas fa-crosshairs"></i> Calculate Marks
        </button>

        <div class="res-display" id="res-nda">
            <span class="placeholder">Enter question counts...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('nda-pro', 'png')"><i class="fas fa-image"></i> Save Result</button>
    </div>
</div>

<script>
    // --- JEE RANK LOGIC ---
    function runJeePro() {
        const perc = parseFloat(document.getElementById('jee-perc').value);
        const cand = parseInt(document.getElementById('jee-cand').value);
        const res = document.getElementById('res-jee');

        if (isNaN(perc) || perc > 100 || isNaN(cand)) return;

        const rank = Math.round(((100 - perc) * cand) / 100) + 1;
        
        res.innerHTML = `Estimated AIR: <b style="color:var(--primary); font-size:1.2rem;">#${rank.toLocaleString()}</b><br>
                        <small>Category Cutoff (Est): ~90.5 Percentile</small>`;
        res.classList.add('show');
    }

    // --- NDA SCORE LOGIC ---
    function runNdaPro() {
        const mc = parseInt(document.getElementById('nda-mc').value) || 0;
        const mw = parseInt(document.getElementById('nda-mw').value) || 0;
        const gc = parseInt(document.getElementById('nda-gc').value) || 0;
        const gw = parseInt(document.getElementById('nda-gw').value) || 0;
        const res = document.getElementById('res-nda');

        // Maths: +2.5, -0.83 | GAT: +4.0, -1.33
        const mScore = (mc * 2.5) - (mw * 0.833);
        const gScore = (gc * 4.0) - (gw * 1.333);
        const total = mScore + gScore;

        res.innerHTML = `Total Marks: <b style="color:#ef4444; font-size:1.2rem;">${total.toFixed(2)} / 900</b><br>
                        <small>Maths: ${mScore.toFixed(2)} | GAT: ${gScore.toFixed(2)}</small>`;
        res.classList.add('show');
    }
</script>
<div class="tool-card" data-category="math" data-tool-id="pnc-pro" data-tags="math probability permutation combination ncr npr pcm jee">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(245, 158, 11, 0.1); color:#f59e0b">
            <i class="fas fa-arrow-up-9-1"></i>
        </div>
        <div class="tool-meta">
            <h3>PnC Master</h3>
            <p>Calculate Permutations (nPr) and Combinations (nCr).</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <div class="input-field">
                    <label>Total Items (n)</label>
                    <input type="number" id="pnc-n" placeholder="n">
                </div>
                <div class="input-field">
                    <label>Selection (r)</label>
                    <input type="number" id="pnc-r" placeholder="r">
                </div>
            </div>
        </div>
        
        <button class="primary-calc-btn" style="background:#f59e0b" onclick="runPncPro()">
            <i class="fas fa-shuffle"></i> Solve Selection
        </button>

        <div class="res-display" id="res-pnc">
            <span class="placeholder">Enter n and r...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('pnc-pro', 'png')"><i class="fas fa-image"></i> PNG</button>
        <button class="export-btn" onclick="universalExport('pnc-pro', 'pdf')"><i class="fas fa-file-pdf"></i> PDF</button>
    </div>
</div>

<div class="tool-card" data-category="math" data-tool-id="binom-pro" data-tags="math probability binomial distribution pcm jee">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(139, 92, 246, 0.1); color:#8b5cf6">
            <i class="fas fa-dice"></i>
        </div>
        <div class="tool-meta">
            <h3>Binomial Solver</h3>
            <p>P(X=k) for n trials and probability p.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack" style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 5px;">
            <div class="input-group"><label>Trials (n)</label><input type="number" id="bn-n" placeholder="n"></div>
            <div class="input-group"><label>Success (k)</label><input type="number" id="bn-k" placeholder="k"></div>
            <div class="input-group"><label>Prob (p)</label><input type="number" id="bn-p" placeholder="0.5" step="0.1"></div>
        </div>
        
        <button class="primary-calc-btn" style="background:#8b5cf6; margin-top:15px;" onclick="runBinomPro()">
            <i class="fas fa-calculator"></i> Find Probability
        </button>

        <div class="res-display" id="res-binom">
            <span class="placeholder">Enter n, k, and p...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('binom-pro', 'png')"><i class="fas fa-image"></i> Save PNG</button>
    </div>
</div>

<script>
    // Helper for large factorials
    function factorial(num) {
        if (num < 0) return 0;
        if (num === 0 || num === 1) return 1;
        let result = 1;
        for (let i = 2; i <= num; i++) result *= i;
        return result;
    }

    function nCr(n, r) {
        if (r > n) return 0;
        return factorial(n) / (factorial(r) * factorial(n - r));
    }

    // --- PNC LOGIC ---
    function runPncPro() {
        const n = parseInt(document.getElementById('pnc-n').value);
        const r = parseInt(document.getElementById('pnc-r').value);
        const res = document.getElementById('res-pnc');

        if (isNaN(n) || isNaN(r) || r > n) return;

        const nPr = factorial(n) / factorial(n - r);
        const nCrVal = nCr(n, r);

        res.innerHTML = `Combination (nCr): <b style="color:#f59e0b">${nCrVal.toLocaleString()}</b><br>
                        Permutation (nPr): <b>${nPr.toLocaleString()}</b>`;
        res.classList.add('show');
    }

    // --- BINOMIAL LOGIC ---
    function runBinomPro() {
        const n = parseInt(document.getElementById('bn-n').value);
        const k = parseInt(document.getElementById('bn-k').value);
        const p = parseFloat(document.getElementById('bn-p').value);
        const res = document.getElementById('res-binom');

        if (isNaN(n) || isNaN(k) || isNaN(p) || p > 1) return;

        const comb = nCr(n, k);
        const prob = comb * Math.pow(p, k) * Math.pow(1 - p, n - k);

        res.innerHTML = `P(X = ${k}): <b style="color:#8b5cf6; font-size:1.1rem">${(prob * 100).toFixed(4)}%</b><br>
                        <small>Decimal: ${prob.toFixed(6)}</small>`;
        res.classList.add('show');
    }
</script>
<div class="tool-card" data-category="utility" data-tool-id="length-pro" data-tags="utility unit conversion length metric pcm">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(16, 185, 129, 0.1); color:#10b981">
            <i class="fas fa-ruler-horizontal"></i>
        </div>
        <div class="tool-meta">
            <h3>Length Bridge</h3>
            <p>Sync Metric and Imperial lengths.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                <div class="input-group">
                    <label>Meters (m)</label>
                    <input type="number" id="len-m" placeholder="m" oninput="syncLen('m')">
                </div>
                <div class="input-group">
                    <label>Feet (ft)</label>
                    <input type="number" id="len-ft" placeholder="ft" oninput="syncLen('ft')">
                </div>
            </div>
            <div class="input-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top:10px;">
                <div class="input-group">
                    <label>Kilometers (km)</label>
                    <input type="number" id="len-km" placeholder="km" oninput="syncLen('km')">
                </div>
                <div class="input-group">
                    <label>Miles (mi)</label>
                    <input type="number" id="len-mi" placeholder="mi" oninput="syncLen('mi')">
                </div>
            </div>
        </div>
        
        <div class="res-display show res-success" style="margin-top:15px; font-size: 0.75rem;">
            Precision: 4 Decimal Places
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('length-pro', 'png')"><i class="fas fa-image"></i> PNG</button>
    </div>
</div>

<div class="tool-card" data-category="physics" data-tool-id="prefix-pro" data-tags="physics units scientific prefix pcm jee">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(99, 102, 241, 0.1); color:var(--primary)">
            <i class="fas fa-microchip"></i>
        </div>
        <div class="tool-meta">
            <h3>Prefix Transformer</h3>
            <p>Scale values from Nano to Giga.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-field">
                <label>Base Value</label>
                <input type="number" id="pre-val" placeholder="e.g. 0.005" oninput="runPrefixPro()">
            </div>
        </div>
        
        <div class="res-display show" id="res-prefix" style="text-align: left; font-size: 0.8rem; font-family: 'Roboto Mono', monospace;">
            <span class="placeholder">Enter value...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('prefix-pro', 'png')"><i class="fas fa-image"></i> Save Result</button>
    </div>
</div>

<script>
    // --- LENGTH SYNC LOGIC ---
    function syncLen(source) {
        const m = document.getElementById('len-m');
        const ft = document.getElementById('len-ft');
        const km = document.getElementById('len-km');
        const mi = document.getElementById('len-mi');

        let val = 0;
        if (source === 'm') {
            val = parseFloat(m.value);
            ft.value = (val * 3.28084).toFixed(4);
            km.value = (val / 1000).toFixed(4);
            mi.value = (val / 1609.34).toFixed(4);
        } else if (source === 'ft') {
            val = parseFloat(ft.value);
            m.value = (val / 3.28084).toFixed(4);
            km.value = (val / 3280.84).toFixed(4);
            mi.value = (val / 5280).toFixed(4);
        }
        // km and mi follow similar logic
    }

    // --- PREFIX LOGIC ---
    function runPrefixPro() {
        const v = parseFloat(document.getElementById('pre-val').value);
        const res = document.getElementById('res-prefix');

        if (isNaN(v)) return;

        res.innerHTML = `
            Giga (G): <b>${(v / 1e9).toExponential(2)}</b><br>
            Kilo (k): <b>${(v / 1000).toFixed(4)}</b><br>
            Milli (m): <b>${(v * 1000).toFixed(2)}</b><br>
            Micro (μ): <b>${(v * 1e6).toFixed(1)}</b><br>
            Nano (n): <b>${(v * 1e9).toFixed(0)}</b>
        `;
    }
</script>
<div class="tool-card" data-category="math" data-tool-id="solid-pro" data-tags="math geometry volume surface area pcm jee">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(139, 92, 246, 0.1); color:#8b5cf6">
            <i class="fas fa-cube"></i>
        </div>
        <div class="tool-meta">
            <h3>Solid Architect</h3>
            <p>Solve Volume & Surface Area for 3D shapes.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-field">
                <label>Shape Type</label>
                <select id="solid-shape" onchange="updateSolidFields()">
                    <option value="sphere">Sphere</option>
                    <option value="cylinder">Cylinder</option>
                    <option value="cone">Cone</option>
                </select>
            </div>
            <div class="input-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 15px;">
                <div class="input-group">
                    <label>Radius (r)</label>
                    <input type="number" id="solid-r" placeholder="r">
                </div>
                <div class="input-group" id="h-field" style="display:none;">
                    <label>Height (h)</label>
                    <input type="number" id="solid-h" placeholder="h">
                </div>
            </div>
        </div>
        
        <button class="primary-calc-btn" style="background:#8b5cf6" onclick="runSolidPro()">
            <i class="fas fa-draw-polygon"></i> Calculate 3D Data
        </button>

        <div class="res-display" id="res-solid">
            <span class="placeholder">Enter dimensions...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('solid-pro', 'png')"><i class="fas fa-image"></i> PNG</button>
        <button class="export-btn" onclick="universalExport('solid-pro', 'pdf')"><i class="fas fa-file-pdf"></i> PDF</button>
    </div>
</div>

<div class="tool-card" data-category="math" data-tool-id="poly-pro" data-tags="math geometry polygon area pcm">
    <div class="tool-header">
        <div class="tool-icon" style="background:rgba(245, 158, 11, 0.1); color:#f59e0b">
            <i class="fas fa-vector-square"></i>
        </div>
        <div class="tool-meta">
            <h3>Polygon Pro</h3>
            <p>Area & Perimeter of any Regular Polygon.</p>
        </div>
    </div>

    <div class="tool-body">
        <div class="input-stack">
            <div class="input-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <div class="input-field">
                    <label>Sides (n)</label>
                    <input type="number" id="poly-n" placeholder="e.g. 5" min="3">
                </div>
                <div class="input-field">
                    <label>Side Length (s)</label>
                    <input type="number" id="poly-s" placeholder="Length">
                </div>
            </div>
        </div>
        
        <button class="primary-calc-btn" style="background:#f59e0b" onclick="runPolyPro()">
            <i class="fas fa-shapes"></i> Solve Polygon
        </button>

        <div class="res-display" id="res-poly">
            <span class="placeholder">Enter sides and length...</span>
        </div>
    </div>

    <div class="card-export-bar">
        <button class="export-btn" onclick="universalExport('poly-pro', 'png')"><i class="fas fa-image"></i> Save PNG</button>
    </div>
</div>

<script>
    function updateSolidFields() {
        const shape = document.getElementById('solid-shape').value;
        const hField = document.getElementById('h-field');
        hField.style.display = (shape === 'sphere') ? 'none' : 'block';
    }

    // --- SOLID GEOMETRY LOGIC ---
    function runSolidPro() {
        const shape = document.getElementById('solid-shape').value;
        const r = parseFloat(document.getElementById('solid-r').value);
        const h = parseFloat(document.getElementById('solid-h').value) || 0;
        const res = document.getElementById('res-solid');

        if (isNaN(r)) return;

        let v, tsa;
        if (shape === 'sphere') {
            v = (4/3) * Math.PI * Math.pow(r, 3);
            tsa = 4 * Math.PI * Math.pow(r, 2);
        } else if (shape === 'cylinder') {
            v = Math.PI * Math.pow(r, 2) * h;
            tsa = (2 * Math.PI * r * h) + (2 * Math.PI * Math.pow(r, 2));
        } else if (shape === 'cone') {
            v = (1/3) * Math.PI * Math.pow(r, 2) * h;
            const l = Math.sqrt(r*r + h*h); // Slant height
            tsa = (Math.PI * r * l) + (Math.PI * r * r);
        }

        res.innerHTML = `Volume: <b style="color:#8b5cf6">${v.toFixed(3)} u³</b><br>
                        Surface Area: <b>${tsa.toFixed(3)} u²</b>`;
        res.classList.add('show');
    }

    // --- POLYGON LOGIC ---
    function runPolyPro() {
        const n = parseInt(document.getElementById('poly-n').value);
        const s = parseFloat(document.getElementById('poly-s').value);
        const res = document.getElementById('res-poly');

        if (isNaN(n) || isNaN(s) || n < 3) return;

        const perimeter = n * s;
        const area = (n * Math.pow(s, 2)) / (4 * Math.tan(Math.PI / n));

        res.innerHTML = `Area: <b style="color:#f59e0b">${area.toFixed(3)} u²</b><br>
                        Perimeter: <b>${perimeter.toFixed(2)} u</b>`;
        res.classList.add('show');
    }
</script>
<div class="system-monitor container">
    <div class="monitor-card">
        <div class="status-indicator">
            <div class="dot pulse"></div>
            <span>Engine: Online</span>
        </div>
        <div class="status-metrics">
            <div class="metric">
                <small>Latency</small>
                <b id="sys-lat">0ms</b>
            </div>
            <div class="metric">
                <small>App Mode</small>
                <b id="pwa-status">Web v4.0</b>
            </div>
        </div>
    </div>
</div>

<style>
    /* --- MONITOR STYLING --- */
    .system-monitor { margin-top: 40px; padding-bottom: 20px; }
    .monitor-card {
        background: var(--card-glass);
        border: 1px solid var(--border-glass);
        border-radius: 18px;
        padding: 15px 25px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        backdrop-filter: blur(10px);
    }
    body.dark-mode .monitor-card { background: var(--card-glass-dark); }

    .status-indicator { display: flex; align-items: center; gap: 10px; font-weight: 700; font-size: 0.8rem; }
    .dot { width: 8px; height: 8px; background: #10b981; border-radius: 50%; }
    .pulse { animation: pulse-green 2s infinite; }

    .status-metrics { display: flex; gap: 30px; }
    .metric { text-align: right; }
    .metric small { display: block; font-size: 0.6rem; color: var(--text-dim); text-transform: uppercase; }
    .metric b { font-size: 0.85rem; color: var(--primary); font-family: 'Roboto Mono', monospace; }

    @keyframes pulse-green {
        0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7); }
        70% { box-shadow: 0 0 0 10px rgba(16, 185, 129, 0); }
        100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
    }
</style>

<script>
    /**
     * FINAL SYSTEM INITIALIZATION
     * Executed by Shashank Kushwaha for StudyTools India
     */
    document.addEventListener('DOMContentLoaded', () => {
        // 1. Calculate Load Latency
        const loadTime = window.performance.timing.domContentLoadedEventEnd - window.performance.timing.navigationStart;
        document.getElementById('sys-lat').innerText = `${loadTime}ms`;

        // 2. PWA Detection
        if (window.matchMedia('(display-mode: standalone)').matches) {
            document.getElementById('pwa-status').innerText = "Native App";
        }

        // 3. Initialize Search Index
        const searchInput = document.getElementById('master-search');
        if(searchInput) {
            console.log("StudyTools India Engine: Search Indexed.");
        }
        
        // 4. Console Branding (Easter Egg)
        console.log("%c STUDYTOOLS INDIA %c v4.0 Professional Edition ", 
                    "background:#6366f1; color:white; padding:5px; border-radius:3px 0 0 3px; font-weight:bold;", 
                    "background:#1e293b; color:#10b981; padding:5px; border-radius:0 3px 3px 0;");
    });

    /**
     * UNIVERSAL SHARE HANDLER
     * Triggers native mobile sharing for any result.
     */
    async function shareResult(title, text) {
        if (navigator.share) {
            try {
                await navigator.share({ title: title, text: text, url: window.location.href });
            } catch (err) { console.log("Share cancelled."); }
        } else {
            alert("Mind-Blowing: Link copied to clipboard!");
        }
    }
</script>
